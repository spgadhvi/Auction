(this["webpackJsonp@livechat/chat-widget"]=this["webpackJsonp@livechat/chat-widget"]||[]).push([[4],{687:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(3),a=n(14),o=n(20),c=n(7),l=n(1),s=n(74),u=n(88),d=n(128),b=n(393),f=n(2),m=n(4),p=n(13),g=n(113),h=n(5),v=(n(47),n(19)),j=n(97),O=function(e){var t=Object(s.g)().Maximized.css.background;return r.createElement(j.a,Object(l.a)({},e,{adjustToColor:t,ariaLabel:"Loading previous messages"}))},x=n(673),y=(n(214),n(677)),w=n(24),A=n(186),k=n(22),C=n(92),S=n(81),E=n(36),T=n(100),_=n(191),I=n(18),z=n(192),R=n(664);var B=Object(m.A)("p",{target:"eprg9im5"})("margin-bottom:",(function(e){var t=e.theme,n=e.mobile;return"modern"!==t.name&&n?0:4}),"px;",(function(e){return e.theme.typography.caption})," ",Object(z.a)(),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin:0;padding:0 12px;max-width:100%;max-height:50px;"),F=Object(m.A)("div",{target:"eprg9im4"})((function(e){var t=e.theme;return!e.mobile&&"modern"===t.name&&"max-height: 230px; overflow-y: auto;"}),";"),P=Object(m.A)("div",{target:"eprg9im3"})("height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?145:140}),"px;overflow:hidden;display:flex;align-items:center;justify-content:center;width:100%;"),D=Object(m.A)("div",{target:"eprg9im2"})("padding:",(function(e){var t=e.theme;return t.spaces.space3+" "+t.spaces.space5}),";display:flex;flex-direction:row;justify-content:center;align-items:center;max-width:100%;"),M=Object(m.A)(R.a,{target:"eprg9im1"})("height:34px;",(function(e){var t=e.theme.isRtl?"left":"right";return Object(i.c)("border-",t,":none;border-top-",t,"-radius:0;border-bottom-",t,"-radius:0;")}),";"),U=Object(m.A)(w.w,{target:"eprg9im0"})("color:",(function(e){var t=e.theme;return e.highlighted?t.colors.ctaText:t.colors.disabledContrast}),";background-color:",(function(e){var t=e.theme;return e.highlighted?t.colors.cta:t.colors.disabled}),";height:34px;width:34px;justify-content:center;align-items:center;display:flex;padding:6px 8px;",(function(e){var t=e.theme,n=t.isRtl?"left":"right",r=t.isRtl?"right":"left";return Object(i.c)("border-top-",r,"-radius:0;border-bottom-",r,"-radius:0;border-top-",n,"-radius:6px;")})," transition:background 100ms linear;"),H={name:"q4dzvk",styles:"width:100%;height:auto"},q=function(e){var t=e.url,n=e.alternativeText,o=e.onAlternativeTextChanged,c=e.mobile,l=e.titleId,s=r.useState(n||""),u=s[0],d=s[1],b=Object(I.f)().isFocusVisible,f=Object(k.l)();return Object(i.d)(a.a,null,(function(e){return Object(i.d)(F,{mobile:c},Object(i.d)(P,{mobile:c},Object(i.d)("img",{src:t,css:H,alt:n})),Object(i.d)(D,null,Object(i.d)(M,{autoFocus:!0,"aria-labelledby":l,"aria-describedby":f,maxLength:16384,value:u,placeholder:e("describe_image"),onChange:function(e){var t=e.target;return d(t.value)}}),Object(i.d)(U,{"aria-label":"save the image's alternative text",highlighted:u!==n||b,disabled:u===n,onPress:function(){o(u)}},Object(i.d)(w.b,{size:24}))),Object(i.d)(B,{id:f,mobile:c},e("alternative_text_description")))}))},L=n(102),V=n(187);var N=Object(m.A)("span",{target:"e1oq7ugp9"})((function(e){var t=e.failed,n=e.theme;return{color:t?n.colors.error:n.colors.primaryTextColor}}),";"),W=Object(m.A)("div",{target:"e1oq7ugp8"})("flex:1;display:flex;flex-direction:column;margin:2px;min-width:calc(50% - 4px);max-width:100%;height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?140:100}),"px;"),K=Object(m.A)("div",{target:"e1oq7ugp7"})("border-radius:",(function(e){return e.theme.borderRadius.xl}),";flex:1;width:100%;height:100%;display:flex;overflow:hidden;position:relative;align-items:center;justify-content:center;"),Y=Object(m.A)("div",{target:"e1oq7ugp6"})("color:",(function(e){return e.theme.colors.secondaryTextColor}),";background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";width:100%;height:100%;display:flex;align-items:center;justify-content:center;"),G=Object(m.A)("img",{target:"e1oq7ugp5"})({name:"q4dzvk",styles:"width:100%;height:auto"}),Q=Object(m.A)("div",{target:"e1oq7ugp4"})({name:"1uja423",styles:"position:absolute;top:6px;right:6px;z-index:1"}),J=Object(m.A)("div",{target:"e1oq7ugp3"})("height:24px;width:24px;display:flex;border-radius:50%;align-items:center;justify-content:center;",(function(e){var t=e.theme,n=e.success,r=e.error;return n?{backgroundColor:t.colors.success,color:t.colors.successContrast}:r?{backgroundColor:t.colors.error,color:t.colors.errorContrast}:void 0}),";"),X=Object(m.A)("div",{target:"e1oq7ugp2"})("opacity:",(function(e){return e.visible?1:0}),";transition:opacity 100ms ",(function(e){return e.theme.transitions.easings.smooth}),";position:absolute;left:6px;right:6px;bottom:6px;display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-between;z-index:1;",E.A,"{width:20px;height:20px;}"),Z=Object(m.A)("div",{target:"e1oq7ugp1"})("border-radius:",(function(e){return e.theme.borderRadius.md}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";padding:2px;display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:rgba(0, 0, 0, 0.6);"),$=Object(m.A)("span",{target:"e1oq7ugp0"})((function(e){return e.theme.typography.caption}),";color:",(function(e){return e.theme.colors.grayscale[0]}),";cursor:pointer;margin-right:4px;"),ee={name:"e0dnmk",styles:"cursor:pointer"},te=function(e){var t=e.failReason,n=r.useRef(null),a=Object(L.f)({},n).focusableProps;return Object(i.d)(J,Object(l.a)({"aria-label":t,error:!0},a,{ref:n,tabIndex:0}),Object(i.d)(E.d,{css:ee,size:24,"aria-hidden":!0}))},ne={name:"1nq59d9",styles:"transition:opacity 100ms linear"},re=function(e){var t=e.name,n=e.failed,r=e.finished,o=e.url,c=e.fileType,l=e.mobile,s=e.alternativeText,u=e.onCancel,d=e.onAlternativeTextEdit,b=e.progress,f=void 0===b?0:b,m=e.failReason,p=void 0===m?"":m,g=e.insistHover,h=e.onHoverChange,v=Object(I.i)({onHoverChange:h}),O=v.hoverProps,x=v.isHovered,y=Object(I.f)().isFocusVisible;return Object(i.d)(a.a,null,(function(e){return Object(i.d)(W,null,Object(i.d)(K,O,Object(i.d)(Q,null,r&&Object(i.d)(J,{success:!0},Object(i.d)(E.db,{size:24,"aria-hidden":!0})),n&&Object(i.d)(V.a,{description:p,allowTouch:!0},Object(i.d)(te,{failReason:p})),!r&&!n&&Object(i.d)(j.a,{size:"medium",progress:f,"aria-hidden":!0})),(u||d)&&Object(i.d)(X,{visible:g||x||y||l},u&&Object(i.d)(Z,null,Object(i.d)(E.A,{onPress:u,"aria-label":"remove the "+t+" file"},Object(i.d)(E.T,{size:20,"aria-hidden":!0}))),"image"===c&&d&&Object(i.d)(Z,null,Object(i.d)(E.A,{onPress:d,"aria-label":"add alternative text to the "+t+" image"},Object(i.d)(E.o,{size:20,"aria-hidden":!0})),Object(i.d)($,{onClick:d},e("alt_text")))),"image"===c&&Object(i.d)(G,{src:o,alt:s||"",style:{opacity:r?1:.25},css:ne}),"other"===c&&Object(i.d)(Y,null,Object(i.d)(E.t,{size:56}))),Object(i.d)(N,{ellipsis:!0,failed:n,finished:r},t))}))};var ie=Object(m.A)("h2",{target:"e1k6tlos7"})((function(e){var t=e.failed,n=e.theme;return t&&{color:n.typography.errorCaption.color}})," padding:0 6px;font-size:14px;font-weight:normal;align-self:center;margin:0;"),ae=Object(m.A)("div",{target:"e1k6tlos6"})({name:"189qznn",styles:"display:flex;cursor:pointer"}),oe=Object(m.A)("div",{target:"e1k6tlos5"})("transition:max-height ",(function(e){return e.longAnimation?600:400}),"ms ",(function(e){return e.theme.transitions.easings.swift}),";overflow:hidden;max-height:249px;"),ce=Object(m.A)("div",{target:"e1k6tlos4"})("height:auto;",(function(e){return e.edit&&{margin:"0 -8px"}}),";"),le=Object(m.A)("div",{target:"e1k6tlos3"})("max-height:",(function(e){var t=e.theme;return e.mobile||"modern"!==t.name?200:125}),"px;overflow:auto;display:flex;flex-direction:row;flex-wrap:wrap;padding:4px 0;"),se=Object(m.A)("hr",{target:"e1k6tlos2"})("margin:",8,"px -",8,"px 0;border:0;border-bottom:1px solid rgba(0, 0, 0, 0.1);"),ue=Object(m.A)(E.i,{target:"e1k6tlos1"})((function(e){return"up"===e.direction&&{transform:"scaleY(-1)"}}),";"),de={name:"gc6sdx",styles:"padding-left:4px"},be=Object(m.A)(w.F,{target:"e1k6tlos0"})("padding:",(function(e){var t=e.theme,n=e.isEdit,r=e.expanded;return!e.mobile&&"modern"===t.name&&n&&r?"8px 8px 0":"8px"}),";",(function(e){return e.theme.typography.basic}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;"),fe={name:"x4j9dr",styles:"margin-top:6px;max-width:100%"},me={name:"13fmgtn",styles:"transform:scaleX(-1)"},pe=Object(S.createSelector)([f.C],(function(e){return e.map((function(e){return Object(l.a)({id:e.id},e.properties)}))})),ge=Object(a.c)((function(e,t){var n=t.chatId,r=function(t){e.emit("cancel_upload",{eventId:t})},i=function(t,r){e.updateEvent(n,t,{properties:{alternativeText:r}})},a=function(){e.emit("send_file_events")};return function(e){var t=e.getApplicationState(),n=t.isSendingFileEvents,o=t.mobile,l=t.config,s=t.license,u=t.group,d=t.requestedGroup,b=pe(Object(c.t)(e));return{mobile:o,persistKey:Object(T.a)({license:s,group:u,requestedGroup:d}),isSendingFileEvents:n,uploadEntries:b,cancelUpload:r,setAlternativeText:i,sendFiles:a,localize:e.localize,themeName:l.theme.name}}}))((function(e){var t=e.uploadEntries,n=e.uploadEnabled,a=e.cancelUpload,o=e.localize,c=e.mobile,s=e.persistKey,u=e.sendFiles,b=e.isSendingFileEvents,m=e.setAlternativeText,p=e.themeName,g=e.scrollToBottom,h=Object(k.l)(),v=Object(k.l)(),O=r.useState(!0),x=O[0],y=O[1],w=r.useState(!1),A=w[0],S=w[1],T=r.useState(!1),I=T[0],z=T[1],R=r.useState(null),B=R[0],F=R[1],P=r.useState(""),D=P[0],M=P[1],U=r.useRef(null),H=r.useRef(null),L=function(e,t){var n=e.filter((function(e){return e.failed})),r=e.filter((function(e){return e.finished})).length,i=n.length,a=e.length,o=t("file_upload_status").replace("%finishedCount%",String(r)).replace("%totalCount%",String(a));switch(!0){case i>0:return{failedCount:i,uploadStatus:"error",title:i>1?t("files_failed_to_upload").replace("%files%",String(i)):n[0].failReason};case r===a:return{uploadStatus:"success",title:o};default:return{uploadStatus:"pending",title:o}}}(t,o),V="error"===L.uploadStatus&&t.length===L.failedCount,N=function(){D&&M("")},W=r.useCallback((function(){return c||"modern"!==p?249:228}),[p,c]),K=r.useCallback((function(e){return(t.length>2||e?W():201)+"px"}),[t,W]),Y=r.useCallback((function(e){Q(e)&&(U.current.style.maxHeight=e)}),[]),G=function(e){return H.current.style.height=e},Q=function(e){return U.current.style.maxHeight!==e},X=r.useCallback((function(){x?(S(!0),Y("0px")):y(!0)}),[x,Y]),Z=function(e){if(x){var t=K(!!e);!e&&Q(t)?(F(null),z(!0),G(H.current.clientHeight+"px"),Y(t)):(Y(W()+"px"),F(e))}else F(e)},$=r.useCallback((function(){A?(y(!1),S(!1)):I&&(G("auto"),z(!1))}),[A,I]);return r.useEffect((function(){t.length&&x&&!A&&Y(K(!!B))}),[t.length,x,A,Y,K,B]),r.useEffect((function(){if(Object(C.b)("session")){var e=function(){Object(f.F)(t)||function(e,t){var n=e.filter((function(e){return e.finished})).map((function(e){return Object(l.a)({},e,{url:e.serverUrl})}));Object(f.F)(n)||window.sessionStorage.setItem(t,JSON.stringify(n))}(t,s)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}}),[t,s]),Object(i.d)(be,{isEdit:B,expanded:!A&&x,mobile:c},Object(i.d)(d.b,{message:L.title,clearOnUnmount:!0,"aria-live":"error"===L.uploadStatus?"assertive":"polite"}),Object(i.d)(ae,{onClick:function(e){e.stopPropagation(),X()}},B?Object(i.d)(E.A,{"aria-label":"go back to upload list",onPress:function(){Z(null)}},Object(i.d)(E.b,{size:24,css:me,"aria-hidden":!0})):Object(i.d)(r.Fragment,null,"pending"===L.uploadStatus?Object(i.d)(j.a,{size:"medium","aria-hidden":!0}):"success"===L.uploadStatus?Object(i.d)(J,{success:!0},Object(i.d)(E.db,{size:24,"aria-label":"Upload success"})):Object(i.d)(J,{error:!0},Object(i.d)(E.d,{size:24,"aria-label":"Upload error"}))),Object(i.d)(ie,Object(l.a)({id:v,flexFill:!0,ellipsis:!0},"error"===L.uploadStatus&&{failed:!0,title:L.title}),B?o("add_alternative_text"):L.title),Object(i.d)(E.A,{css:de,"aria-label":"Toggle upload list","aria-controls":h,"aria-expanded":x,onPress:X,autoFocus:!0},Object(i.d)(E.B,{size:24,"aria-hidden":!0},Object(i.d)(ue,{direction:x&&!A?"down":"up",size:24})))),x&&!A&&Object(i.d)(se,null),Object(i.d)(oe,{ref:U,onTransitionEnd:$,longAnimation:!x||A},x&&Object(i.d)(ce,{id:h,edit:!!B,ref:H},B?Object(i.d)(q,Object(l.a)({titleId:v},t.find((function(e){return e.id===B})),{onAlternativeTextChanged:function(e){Z(null),m(B,e)},mobile:c})):Object(i.d)(r.Fragment,null,Object(i.d)(le,{mobile:c},t.map((function(e){return Object(i.d)(re,Object(l.a)({},e,{key:e.id,mobile:c,failed:!!e.failed,insistHover:D===e.id,onHoverChange:N,onCancel:!b||e.failed?function(){return function(e){if(!c&&t.length>1){var n=Object(f.q)((function(t){return t.id===e}),t),r=n===t.length-1;M(t[n+(r?-1:1)].id)}a(e)}(e.id)}:null,onAlternativeTextEdit:b?null:function(){return Z(e.id)}}))}))),Object(i.d)(_.a,{onClick:function(){u(),g({duration:0})},disabled:V||!n,pending:b||"pending"===L.uploadStatus,css:fe},o("send_files"))))))}));var he=Object(m.A)("div",{target:"ezpiwsd0"})({name:"1u57r43",styles:"position:absolute;bottom:0;left:0;right:0;z-index:100"}),ve=Object(a.c)((function(e,t){var n=t.markAsSeen,r=function(){c.y(h.d,Date.now(),e).reverse().forEach((function(e){return n(e.id)}))};return function(e){var t=!Object(f.F)(c.t(e)),n=e.getApplicationState("mobile"),i=c.l(e,h.d),a=e.getUnseenCount(h.d),o=i&&i.properties?i.properties.text:null;return{isFileUploadAllowed:c.nb(e),isFileUploadPossible:c.T(e),isUploadingFiles:t,previewText:o,unseenCount:a,mobile:n,markAllEventsAsSeen:r,localize:e.localize}}}))((function(e){var t=e.isFileUploadAllowed,n=e.isFileUploadPossible,i=e.isUploadingFiles,a=e.previewText,c=e.unseenCount,l=e.chatId,s=e.mobile,u=e.scrollToBottom,f=e.markAllEventsAsSeen,m=e.isOnBottomSource,p=e.isScrollable,g=e.localize,h=a,v=Object(o.v)(m),j=c>0&&!v&&p,O=r.useState(j),x=O[0],y=O[1];return h||(h=g(c>1?"new_messages":"new_message")),!j&&x&&y(!1),r.useEffect((function(){if(j){var e=setTimeout((function(){return y(!0)}),300);return function(){return clearTimeout(e)}}}),[j]),r.createElement(he,null,r.createElement(b.a,{appear:!0,component:null},t&&i&&r.createElement(A.b,{key:"upload"},r.createElement(ge,{scrollToBottom:u,chatId:l,uploadEnabled:n})),x&&r.createElement(A.b,{key:"unseen"},r.createElement(w.ab,{text:h,stickToEdge:s,unseenCount:c,onClick:u,onClose:f}))),x&&r.createElement(d.b,{message:h,clearOnUnmount:!0,"aria-live":"assertive"}))})),je=n(90),Oe=n(6),xe=n(21),ye=n(59),we=n.n(ye),Ae=n(57),ke=n(154),Ce=n(28),Se=n(674),Ee=n(29),Te=n(213),_e=r.createContext({}),Ie=Object(m.A)("ul",{target:"e1ixnb8m0"})("list-style-type:none;position:absolute;z-index:100;background:",(function(e){return e.theme.colors.floatSurface}),";box-shadow:",(function(e){return e.theme.boxShadow.md}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";margin:0;margin-top:3.2em;margin-left:0.8em;padding:0;min-width:180px;overflow:hidden;&:focus{outline:none;}&>:last-child{border-bottom:0;}"),ze=function(e){var t=function(e){var t=e.highlightedIndex,n=e.items,r=t.current;return null===r||r<0||0===n.current.length?null:n.current[r].ref}(e);return null!==t&&"true"!==t.current.getAttribute("aria-disabled")};var Re=function(e){var t=e.children,n=e.onClose,i=e.menuButtonRef,a=e.onSelect,c=Object(Oe.a)(e,["children","onClose","menuButtonRef","onSelect"]),s=Object(Ae.useFrame)(),u=r.useRef(null),d=r.useRef(!1),b=Object(Se.a)({onSelect:a}),f=b.useHighlightedItemId();return Object(o.m)(u,(function(e){i.current.contains(e.target)||n()}),s),Object(o.n)((function(){u.current&&u.current.focus()})),r.createElement(Te.a,null,r.createElement(_e.Provider,{value:b},r.createElement(Ie,Object(l.a)({onMouseOut:b.clearHighlightedItem,tabIndex:-1,role:"menu",ref:u,"aria-activedescendant":f,onMouseDown:function(){return d.current=!1},onKeyDown:function(e){switch(d.current=!0,e.preventDefault(),e.key){case"ArrowUp":return void b.moveHighlightedItem(-1);case"ArrowDown":return void b.moveHighlightedItem(1);case"Home":return void b.setHighlightedItem(0);case"End":return void b.setHighlightedItem(b.items.current.length-1);case" ":if(!ze(b))return;return void b.selectHighlightedItem();case"Enter":if(!ze(b))return;return b.selectHighlightedItem(),n(),void i.current.focus();case"Tab":return n(),e.shiftKey?void i.current.focus():void Object(Ee.d)(i.current).focus();case"Escape":return n(),void i.current.focus();default:return void b.highlightItemByString(e)}}},c),t)))},Be=n(31),Fe=Object(m.A)("li",{target:"ezmrzej0"})("background:transparent;font-family:inherit;font-size:14px;border:0;display:flex;align-items:center;padding:",(function(e){return e.theme.spaces.space4}),";padding-right:",(function(e){return e.theme.spaces6}),";width:100%;cursor:pointer;border-bottom:",(function(e){return"1px solid "+e.theme.colors.divider}),";color:",(function(e){var t=e.highlighted,n=e.theme;return t?n.colors.ctaText:n.colors.primaryTextColor}),";background-color:",(function(e){var t=e.highlighted,n=e.theme;return t&&n.colors.cta}),";&[aria-disabled='true']{pointer-events:none;color:",(function(e){return e.theme.colors.disabledContrast}),";background-color:",(function(e){return e.theme.colors.disabled}),";}"),Pe=function(e){var t=e.disabled,n=e.text,i=e.value,a=Object(Oe.a)(e,["disabled","text","value"]),o=r.useRef(null),c=r.useContext(_e),s=c.clearHighlightedItem,u=(0,c.useItem)({ref:o,text:n,value:i}),d=u.id,b=u.highlight,f=u.select,m=(0,u.useHighlighted)();return r.createElement(Fe,Object(l.a)({role:"menuitem",id:d,ref:o,highlighted:m,onMouseOver:b,onMouseOut:s,onClick:function(e){1!==e.nativeEvent.which||t||f()}},t&&{"aria-disabled":!0},a))},De=function(e){var t=e.theme,n=e.disabled,r=e.active;return Object(i.c)("&:hover{background-color:",r?t.colors.pressedElement:t.colors.surfaceVariantHover,";",n&&"background-color: transparent",";}")},Me=Object(m.A)("label",{target:"e1e9gyrb2"})("color:",(function(e){return e.theme.colors.textPrimaryColor}),";cursor:",(function(e){return e.disabled?"not-allowed":"pointer"}),";display:flex;align-items:center;"),Ue=Object(m.A)("span",{target:"e1e9gyrb1"})("display:flex;align-items:center;justify-content:center;&:focus{outline-style:",(function(e){return e.focusVisible?"auto":"none"}),";}"),He=Object(m.A)("span",{target:"e1e9gyrb0"})("display:inline-block;",(function(e){var t=e.theme;return Object(i.c)("margin-",t.isRtl?"right":"left",":5px;")}),";"),qe=function(e){var t=e.disabled,n=e.icon,i=e.label,a=e.fileInputRef,c=Object(s.g)(),u=Object(o.k)((function(){return a.current.click()})),d=Object(I.f)(),b=function(e){return e||w.c}(n);return r.createElement(Me,{flexFit:!0,htmlFor:"fileupload",disabled:t},r.createElement(Ue,Object(l.a)({role:"button","aria-label":"Send a file",tabIndex:"0"},u,d),r.createElement(b,{color:t?c.colors.tertiaryTextColor:"currentColor","aria-hidden":!0}),i?r.createElement(He,null,i):null))},Le=n(25),Ve=n(683);var Ne=Object(f.d)(["\ud83d\ude42","\ud83d\ude01","\ud83d\ude02","\ud83d\ude0a","\ud83d\ude0d","\ud83d\ude10","\ud83d\ude15","\ud83d\ude12","\ud83d\ude22","\ud83d\ude2d","\ud83c\udf89","\u2764\ufe0f","\ud83d\udc4c","\ud83d\udc4d","\ud83d\ude4f"],5),We=Object(m.A)("div",{target:"e1pkkif43"})({name:"14y8lnv",styles:"margin:0;padding:0;outline:none"}),Ke=Object(m.A)(w.w,{target:"e1pkkif42"})("display:flex;justify-content:center;align-items:center;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;",De,";"),Ye=Object(m.A)("div",{target:"e1pkkif41"})({name:"frpnj0",styles:"display:flex;flex-direction:row;align-items:center;justify-content:flex-start"}),Ge=Object(m.A)("div",{target:"e1pkkif40"})({name:"1uuyw89",styles:"display:flex;align-items:center;justify-content:center;flex-shrink:0;flex-grow:0"}),Qe=function(e){var t=e.onEmojiPicked,n=e.disabled,i=r.useRef(null),a=r.useRef(null),o=r.useRef({open:f.U,close:f.U}),c=r.useState(!1),l=c[0],s=c[1],u=function(e){t(e),o.current.close(),Math.random()<.1&&Object(Ce.d)("Emoji_inserted_from_picker",{emoji:e})},d=Object(Se.a)({onSelect:u}),b=d.useHighlightedItemId();r.useEffect((function(){n&&l&&o.current.close()}),[n,l]);return 0===Ne.length||Object(Le.f)()?null:r.createElement(V.a,{animated:!0,placement:"top",trigger:"press",kind:"float",controlsRef:o,onOpenChange:function(e,t){var n;if(Object(I.c)()?d.setHighlightedItem(0):d.clearHighlightedItem(),e)null==(n=a.current)||n.focus(),Math.random()<.01&&Object(Ce.d)("emoji_picker_opened",{});else if(!t){var r;null==(r=i.current)||r.focus()}s(e)},description:r.createElement(We,{tabIndex:0,role:"grid","aria-label":"emoji picker",ref:a,"aria-activedescendant":b,onKeyDown:function(e){switch(e.key){case"ArrowUp":d.highlightedIndex.current-5>=0&&d.moveHighlightedItem(-5);break;case"ArrowDown":d.highlightedIndex.current+5<d.items.current.length&&d.moveHighlightedItem(5);break;case"ArrowLeft":d.highlightedIndex.current-1>=0&&d.moveHighlightedItem(-1);break;case"ArrowRight":d.highlightedIndex.current+1<d.items.current.length&&d.moveHighlightedItem(1);break;case"Home":d.setHighlightedItem(0);break;case"End":d.setHighlightedItem(d.items.current.length-1);break;case" ":case"Enter":e.preventDefault(),d.selectHighlightedItem();break;case"Tab":return void e.preventDefault();default:return void d.highlightItemByString(e)}e.preventDefault()}},Ne.map((function(e,t){return r.createElement(Ye,{key:t,role:"row"},e.map((function(e,t){return r.createElement(Ge,{key:t,role:"gridcell"},r.createElement(Ve.a,{emoji:e,itemList:d,onPress:function(){return u(e)}}))})))})))},r.createElement(Ke,{"aria-label":"open emoji picker",ref:i,active:l,onPress:function(){l&&o.current.close()},disabled:n},r.createElement(w.p,null)))};var Je=function(e){return Object(i.c)("padding:0;color:",e.colors.tertiaryTextColor,";border-radius:",e.borderRadius.md,";transition:background-color 100ms ease-in-out;margin-left:",e.spaces.space1,";opacity:1;&:disabled{svg *{fill:",e.colors.tertiaryTextColor,";}}svg *{transition:fill 100ms ease-in-out;will-change:fill;}")},Xe=Object(m.A)("div",{target:"ex4ls1q3"})("position:absolute;top:0;height:100%;display:flex;align-items:flex-end;padding-bottom:",(function(e){return e.theme.spaces.space4}),";",(function(e){return e.position+": "+(e.dense?"0.75em":"10px")}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),Ze=Object(m.A)(m.q,{target:"ex4ls1q2"})({name:"bjn8wh",styles:"position:relative"}),$e={name:"1oaeivz",styles:"margin-right:8px"},et={name:"1qkltea",styles:"margin-left:5px"},tt=Object(m.A)(w.w,{target:"ex4ls1q1"})("display:flex;color:",(function(e){var t=e.theme;return e.disabled?t.colors.tertiaryTextColor:t.colors.primaryTextColor}),";will-change:background-color;background-color:",(function(e){var t=e.theme;return e.active?t.colors.pressedElement:"transparent"}),";transition:background-color 150ms ease-in-out;opacity:1;svg{display:block;}",De,";"),nt=Object(m.A)("input",{target:"ex4ls1q0"})({name:"eivff4",styles:"display:none"}),rt={name:"zefn70",styles:"bottom:4.8em;right:2em"};var it=Object(a.c)((function(e,t){var n=t.chatId,r=function(t,n){p.d(e,t,n)},i=function(t){p.F(e,n,t)},a=function(t){p.I(e,n,t)},o=function(){p.K(e,Object(l.a)({source:"message_box"},c.C(e)))};return function(t){return{sendFile:r,sendMessage:i,setMessageDraft:a,openVideoCallMoment:o,messageDraft:t.getApplicationState("messageDraft"),initialMessageDraft:t.getApplicationState("initialMessageDraft"),reconnecting:c.yb(t),allowInput:c.ob(t),allowFileUpload:c.nb(t),isFileUploadPossible:c.T(t),mobile:t.getApplicationState("mobile"),applicationFocused:t.getApplicationState("applicationFocused"),videoCallButtonState:c.B(t),rtl:t.getApplicationState("rtl"),showAlternativeUploadOption:!t.getApplicationState("mobile")&&c.nb(t),showPermissionDeniedMessage:function(){return r=t.localize("screenshot_permission_error"),void p.a(e,n,{text:r});var r}}}}))((function(e){var t=e.allowFileUpload,n=e.isFileUploadPossible,c=e.mobile,s=e.onHeightChange,u=e.onSendMessage,d=e.allowInput,b=e.reconnecting,p=e.sendFile,g=e.sendMessage,h=e.setMessageDraft,j=(e.applicationFocused,e.onFocusChange),O=e.openVideoCallMoment,x=e.videoCallButtonState,y=e.rtl,A=e.showAlternativeUploadOption,k=e.messageDraft,C=e.initialMessageDraft,S=e.showPermissionDeniedMessage,E=Object(Oe.a)(e,["allowFileUpload","isFileUploadPossible","mobile","onHeightChange","onSendMessage","allowInput","reconnecting","sendFile","sendMessage","setMessageDraft","applicationFocused","onFocusChange","openVideoCallMoment","videoCallButtonState","rtl","showAlternativeUploadOption","messageDraft","initialMessageDraft","showPermissionDeniedMessage"]),T=r.useRef(null),_=r.useRef(null),I=r.useRef([0,0]),z=r.useRef(null),R=Object(o.h)("text-composer"),B=R.get(),F=r.useState(B||k||C||""),P=F[0],D=F[1],M=r.useState(!1),U=M[0],H=M[1],q=r.useState(!1),L=q[0],N=q[1],W=r.useMemo((function(){return h}),[h]),K=Object(o.d)(b),Y=Object(Be.b)(),G=y?"rtl":"ltr",Q=Object(Ae.useFrame)().document,J=r.useCallback((function(e,t){return e.forEach((function(e){return p(e,t)}))}),[p]),X=r.useCallback((function(e){switch(H(!1),e){case"screenshot":ne(),Object(Ce.d)("snapshot_selected",{});break;case"file":z.current.click()}}),[H,ne]),Z=r.useCallback((function(){N(!0),j&&j(!0)}),[j]),$=r.useCallback((function(){N(!1),j&&j(!1)}),[j]),ee=r.useCallback((function(e){D(""),g(e),h(null),R.clear(),u&&u()}),[g,u,h,R]),te=r.useCallback((function(e){J(Object(f.ub)(e.target.files))}),[J]),ne=r.useCallback((function(){Object(v.a)().then((function(e){J([e],"screenshot")})).catch((function(e){"NotAllowedError"===e.name&&S(),Object(Ce.d)("snapshot_cancel",{reason:e.message})}))}),[J,S]);r.useEffect((function(){var e=T.current,t=function(){I.current=[e.selectionStart,e.selectionEnd]};return e.addEventListener("blur",t),function(){return e.removeEventListener("blur",t)}}),[]),r.useEffect((function(){var e=function(e){var t=Array.from(e.clipboardData.items);if(!t.some((function(e){return"text/plain"===e.type}))){var n=t.reduce((function(e,t){var n=t.getAsFile();return n&&e.push(n),e}),[]);n.length&&(e.preventDefault(),J(n,"clipboard"))}};return t&&L&&n&&Q.addEventListener("paste",e),function(){return Q.removeEventListener("paste",e)}}),[t,L,n,Q,p,J]);var re=function(e){var t=I.current,n=t[0],r=t[1];we.a.flushSync((function(){D((function(t){var i=t.slice(0,n)+e+t.slice(r,t.length);return R.set(i),i}))})),we.a.flushSync((function(){T.current.focus();var t=n+e.length;T.current.setSelectionRange(t,t)}))},ie=Y?{id:"chat-widget-text-input"}:{};return Object(i.d)(a.a,null,(function(e){return Object(i.d)(m.t,Object(l.a)({},E,{value:P,active:d,disabled:b&&!K,mobile:c,defaultValue:B,onSend:ee,onValueChange:function(e){D(e),R.set(e),W(e)}}),Object(i.d)(Ze,{verticalAlign:"center"},x.visible&&Object(i.d)(Xe,{position:"left",dense:x.visible},Object(i.d)(V.a,{placement:"top",description:"Start a video call"},Object(i.d)(w.w,{onPress:O,disabled:x.disabled,css:function(e){return{opacity:1,color:x.disabled?e.colors.tertiaryTextColor:e.colors.primaryTextColor}},"aria-label":"Start a video call"},Object(i.d)(w.bb,null)))),Object(i.d)(m.u,Object(l.a)({ref:T,autoFocus:Object(ke.c)(),css:function(e){return function(e){var t=e.disabled,n=e.leftIcons,r=e.mobile,a=e.theme;return Object(i.c)("font-family:inherit;padding:14px ",a.isRtl&&!r&&"modern"!==a.name?"125px":"115px"," 14px ",n?"3.75em":"10px",";overflow-y:auto;margin:0;transition:box-shadow 0.1s ease-in-out;color:",t?a.colors.tertiaryTextColor:a.colors.primaryTextColor,";background-color:",t?a.colors.disabled:Object(xe.i)(.012,a.colors.surface),";border-radius:","modern"!==a.name?"12px":"0",";border:1px solid ",a.colors.borderSubtle,";box-shadow:",a.boxShadow.xl,";&:focus{background-color:",a.colors.surface,";border-color:",a.colors.cta,";}&:disabled{cursor:not-allowed;}")}({theme:e,mobile:c,disabled:b&&!K,leftIcons:x.visible})},disabled:b&&!K,flexFill:!0,minRows:1,onClick:function(){L||T.current.focus()},onBlur:$,onFocus:Z,onHeightChange:s,placeholder:e("embedded_textarea_placeholder"),"aria-label":e("embedded_textarea_placeholder"),enterKeyHint:"send",dir:P?"auto":G},ie)),Object(i.d)(Xe,{position:"right",dense:x.visible},Object(i.d)(Qe,{onEmojiPicked:re,disabled:b&&!K}),t&&!A&&Object(i.d)(qe,{disabled:!n,handleFileChange:te,fileInputRef:z}),A&&Object(i.d)(tt,{"aria-label":"Add an attachment",ref:_,onPress:function(){return H(!U)},disabled:!n,active:U},Object(i.d)(w.c,{"aria-hidden":"true"})),U&&Object(i.d)(Re,{"aria-label":"File upload menu",menuButtonRef:_,onClose:function(){return H(!1)},css:rt,onSelect:X},Object(i.d)(Pe,{value:"file",disabled:Y},Object(i.d)(qe,{disabled:!n,handleFileChange:te,label:e("send_file"),icon:w.r})),Object(i.d)(Pe,{value:"screenshot",disabled:Y},Object(i.d)(w.N,{css:function(e){return function(e){return e.isRtl?et:$e}(e)},"aria-hidden":!0}),e("attach_screenshot"))),Object(i.d)(m.r,{flexFit:!0,icon:Object(i.d)(w.O,null),css:Je,"aria-label":"Send a message"}),!Y&&Object(i.d)(nt,{multiple:!0,onChange:te,type:"file",value:"",id:"fileupload",ref:z,disabled:!n}))))}))})),at=n(12),ot=n(392);var ct=Object(m.A)("span",{displayName:"DividerLabel",target:"eceo2x80"})({name:"1rpc86p",styles:"padding:4px 8px;font-size:12px;position:relative;padding:0 8px;&:before,&:after{content:'';width:50vw;height:0;border-top:1px solid;border-top-color:inherit;position:absolute;top:50%;}&:before{right:100%;}&:after{left:100%;}"}),lt=function(e,t){var n=new Date(e);return n.toLocaleDateString()===(new Date).toLocaleDateString()?t.today(n):function(e){var t=new Date;return t.setDate(t.getDate()-1),e.toLocaleDateString()===t.toLocaleDateString()}(n)?t.yesterday(n):n.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit"})},st=function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window},ut=function(e,t,n){var r=Object(f.Bb)(t).sort((function(e,t){return e.timestamp-t.timestamp})),i=Object(f.q)((function(t){return t.node===e}),r);if(i>-1)return{currentTimestamp:r[i].timestamp,previousTimestamp:i>0?r[i-1].timestamp:n}},dt=function(e,t){var n=r.useRef({beginingOfTime:t,currentTimestamp:0,subscribers:[],dividers:{}}),i=function(e){var t={timestamp:e,direction:e>n.current.currentTimestamp?"down":"up"};n.current.currentTimestamp=e,n.current.subscribers.forEach((function(e){return e(t)}))},a=function(e){var t=e.rootRef,n=e.rootMargin,i=e.threshold,a=e.intersectionHandler;if(st()){var c=r.useRef(null),l=r.useRef([]),s=Object(o.l)(a);return r.useEffect((function(){return c.current=new IntersectionObserver((function(e,t){s.current&&s.current(e,t)}),{root:t.current,rootMargin:n,threshold:i}),l.current.forEach((function(e){return c.current.observe(e)})),l.current=[],function(){return c.current.disconnect()}}),[n,i,t,s]),Object(o.c)((function(){return{add:function(e){c.current?c.current.observe(e):l.current.push(e)},remove:function(e){c.current?c.current.unobserve(e):l.current=l.current.filter((function(t){return t!==e}))}}}))}}({rootRef:e,intersectionHandler:function(e){var t=function(e,t,n){var r=e.filter((function(e){return e.isIntersecting})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top}))[0];if(r){var i=ut(r.target,t,n);return i&&i.previousTimestamp}var a=e.filter((function(e){return e.boundingClientRect.top<=e.rootBounds.top})).sort((function(e,t){return e.boundingClientRect.top-t.boundingClientRect.top})).reverse()[0];if(a){var o=ut(a.target,t,n);return o&&o.currentTimestamp}}(e,n.current.dividers,n.current.beginingOfTime);t&&i(t)},threshold:.2});return r.useEffect((function(){var e=Object(f.Bb)(n.current.dividers).map((function(e){return e.timestamp})),t=Math.max.apply(Math,e.concat([n.current.beginingOfTime]));n.current.currentTimestamp=t,n.current.subscribers.forEach((function(e){return e({timestamp:t,direction:"up"})}))}),[]),Object(o.c)((function(){return{add:function(e){n.current.dividers[e.timestamp]=e,a&&a.add(e.node)},remove:function(e){a&&a.remove(e.node),delete n.current.dividers[e.timestamp]},subscribe:function(e){n.current.subscribers.push(e)},unsubscribe:function(e){n.current.subscribers=n.current.subscribers.filter((function(t){return t!==e}))},setBeginingOfTime:function(e){n.current.beginingOfTime=e},currentTimestamp:function(){return n.current.currentTimestamp},setToNewestTimestamp:function(){var e=Object.keys(n.current.dividers).map(Number).sort((function(e,t){return t-e}))[0];i(e)}}}))},bt=r.createContext(null),ft=function(){return r.useContext(bt)},mt=function(e){var t=e.children,n=e.rootRef,i=e.beginingOfTime,a=e.isOnBottomSource,o=dt(n,null!=i?i:0);return r.useEffect((function(){o.setBeginingOfTime(null!=i?i:0)})),r.useEffect((function(){return a.subscribe((function(e){e&&o.setToNewestTimestamp()}))}),[a,o]),r.createElement(bt.Provider,{value:o},t)};function pt(){var e=Object(at.a)(["\n\t&-enter ",", &-exit "," {\n\t\tposition: relative;\n\t}\n\n\t&-enter "," {\n\t\ttop: ",";\n\t}\n\t&-enter-active "," {\n\t\ttop: 0;\n\t\ttransition: top ","ms ease-out;\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ease-out;\n\t}\n\n\t&-exit "," {\n\t\ttop: 0;\n\t\tposition: relative;\n\t}\n\t&-exit-active "," {\n\t\ttop: ",";\n\t\ttransition: top ","ms ease-out;\n\t}\n"]);return pt=function(){return e},e}var gt={name:"sx4ymz",styles:"opacity:0;pointer-events:none"},ht=Object(m.A)(ct,{target:"e1g4em791"})("color:",(function(e){return e.theme.colors.primaryTextColor}),";overflow:hidden;border:1px solid ",(function(e){return e.theme.colors.divider}),";background-color:",(function(e){return e.theme.colors.surface}),";border-radius:",(function(e){return e.theme.borderRadius.md}),";padding:2px 6px;transition:opacity 150ms linear;",(function(e){return!e.visible&&gt}),";"),vt=Object(m.A)("span",{target:"e1g4em790"})(""),jt=200;var Ot=st()?function(e){var t=e.isUserScrollingSource,n=Object(Oe.a)(e,["isUserScrollingSource"]),c=Object(o.v)(t),s=ft(),u=r.useState({direction:"up",timestamp:s.currentTimestamp()}),d=u[0],f=u[1];return r.useEffect((function(){s.subscribe(f);var e=s.currentTimestamp();return e!==d.timestamp&&f({direction:"up",timestamp:e}),function(){return s.unsubscribe(f)}}),[s]),d.timestamp?r.createElement(a.a,null,(function(e){var t=lt(d.timestamp,{today:function(){return e("today")},yesterday:function(){return e("yesterday")}});return r.createElement(i.a,null,(function(e){var i=function(e,t){return e(pt(),String(vt),String(vt),String(vt),"up"===t?"-2em":"2em",String(vt),jt,jt,String(vt),String(vt),"up"===t?"2em":"-2em",jt)}(e.css,d.direction);return r.createElement(b.a,{component:null,childFactory:function(e){return r.cloneElement(e,{classNames:i})}},r.createElement(ot.a,{key:t,classNames:i,timeout:jt},r.createElement(ht,Object(l.a)({},n,{visible:c}),r.createElement(vt,null,t))))}))})):null}:function(){return null},xt=function(e){var t=ft();r.useEffect((function(){var n={timestamp:e.timestamp,node:e.nodeRef.current};return t.add(n),function(){t.remove(n)}}),[])};var yt=Object(m.A)("div",{target:"ehmqpie0"})({name:"1wai6wj",styles:"height:20px;margin:16px -0.5em;text-align:center;overflow:hidden"}),wt=function(e){var t=e.timestamp,n=r.useRef(null);return xt({timestamp:t,nodeRef:n}),r.createElement(a.a,null,(function(e){return r.createElement(yt,{ref:n},r.createElement(ct,null,lt(t,{today:function(e){return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},yesterday:function(){return e("yesterday")}})))}))};var At=Object(m.A)("div",{displayName:"NewMessageHorizontalDivider",target:"eacid5n1"})({name:"gbe43y",styles:"height:27px;margin:16px -0.5em;text-align:center;overflow:hidden"}),kt=Object(m.A)(w.Z,{target:"eacid5n0"})({name:"1c0l2b2",styles:"display:inline-flex;padding:2px 12px;font-weight:normal;box-shadow:none;height:auto;&:before,&:after{border-top:0;}"}),Ct=function(e){var t=e.unseenCount,n=e.setScrollTargetNode,i=r.useRef(null),c=r.useState(!0),l=c[0],s=c[1];return Object(o.n)((function(){i.current&&n(i.current)})),r.useEffect((function(){var e=setTimeout((function(){return s(!1)}),625);return function(){return clearTimeout(e)}}),[]),r.createElement(a.a,null,(function(e){return r.createElement(At,{ref:i},r.createElement(kt,{animated:l,minScale:.9,maxScale:1.05},e(1===t?"new_message":"new_messages")))}))},St=n(15),Et={modern:42,smooth:56},Tt=Object(m.A)("div",{target:"e8t2lg23"})("width:",(function(e){return e.isVisible?100:0}),"%;height:",(function(e){return e.isVisible?100:0}),"%;position:absolute;top:0;left:0;z-index:101;"),_t=Object(m.A)("div",{target:"e8t2lg22"})("position:relative;top:",(function(e){return e.topOffset}),"px;left:0;width:100%;height:",(function(e){return"calc(100% - "+e.topOffset+"px)"}),";background-color:",(function(e){var t=e.theme;return Object(xe.h)(t.colors.surface,.93)}),";padding:",(function(e){return e.theme.spaces.space3}),";pointer-events:none;"),It=Object(m.A)("div",{target:"e8t2lg21"})("display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;border:2px dashed ",(function(e){return e.theme.colors.border}),";border-radius:",(function(e){return e.theme.borderRadius.lg}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";"),zt=Object(m.A)("h1",{target:"e8t2lg20"})((function(e){return e.theme.typography.subheading}),";"),Rt=Object(a.c)((function(e){return{uploadFile:function(t){return Object(p.d)(e,t,"drag")},hideDropArea:function(){return e.setApplicationState({dropAreaVisible:!1})},isVisible:e.getApplicationState("dropAreaVisible")}}))((function(e){var t=e.isVisible,n=e.uploadFile,i=e.hideDropArea,o=e.topBarHeight,c=r.useState(!1),l=c[0],u=c[1],d=Object(s.g)(),f=Et[d.name]+o,m=function(e){e.preventDefault(),e.stopPropagation()};return r.createElement(Te.a,null,r.createElement(Tt,{onDragLeave:function(){i()},onDragOver:m,onDrop:function(e){var t;m(e);var r=null==(t=e.dataTransfer)?void 0:t.files;r&&Array.prototype.forEach.call(r,n),i()},isVisible:t||l},r.createElement(b.a,{appear:!0,component:null},t&&r.createElement(A.e,{length:300,onEnter:function(){return u(!0)},onExited:function(){return u(!1)}},r.createElement(_t,{topOffset:f},r.createElement(It,null,r.createElement(w.m,null),r.createElement(a.a,null,(function(e){return r.createElement(zt,null,e("drop_files_here"))}))))))))})),Bt=Object(m.A)("div",{target:"ekfrplk0"})((function(e){return e.theme.typography.basic})," color:",(function(e){return e.theme.colors.textPrimary}),";line-height:1.2;color:inherit;display:flex;width:100%;flex-direction:",(function(e){return e.row?"row":"column"}),";"),Ft=n(48),Pt=n(669),Dt=n(671);var Mt=Object(m.A)("div",{target:"e1lbo1s41"})({name:"175oc9c",styles:"display:flex;justify-content:center;flex-shrink:0"}),Ut=Object(m.A)("div",{displayName:"IconLabel",target:"e1lbo1s40"})("display:flex;justify-content:center;align-items:center;",(function(e){var t=e.size,n=e.theme;return{width:t,height:t,borderRadius:n.borderRadius.round,backgroundColor:n.colors.surfaceDecorative}}),";"),Ht=function(e){var t=e.size,n=void 0===t?"64px":t,i=e.children,a=Object(Oe.a)(e,["size","children"]);return r.createElement(Mt,null,r.createElement(Ut,Object(l.a)({size:n},a),i))};var qt=n(263),Lt=n(219),Vt=n(136);var Nt={name:"jubs0u",styles:"margin:0;background:transparent"},Wt=function(e){return Object(i.c)("position:absolute;z-index:1500;width:calc(100% - 2rem);max-width:290px;top:1em;left:50%;color:",e.colors.primaryTextColor,";background:",e.colors.surface,";box-shadow:",e.boxShadow.lg,";padding:",1*e.spaceBase,"px;border-radius:",e.borderRadius.xl,";")},Kt=Object(m.A)("div",{target:"e1yhh5l71"})({name:"4hray5",styles:"display:flex;flex-direction:row-reverse"}),Yt=Object(m.A)("div",{target:"e1yhh5l70"})("padding:",(function(e){return 1*e.theme.spaceBase}),"px;padding-top:0;"),Gt=r.forwardRef((function(e,t){var n=e.onClose,a=void 0===n?f.U:n,o=e.children,c=e["aria-label"],s=e["aria-labelledby"],u=e.isPreview,d=Object(Oe.a)(e,["onClose","children","aria-label","aria-labelledby","isPreview"]);Object(qt.d)({isDisabled:u});var b=Object(qt.c)({isOpen:!0,isDismissable:!0,onClose:a},t).overlayProps,m=Object(qt.b)().modalProps,p=function(e,t){var n=e.role,i=void 0===n?"dialog":n,a=Object(k.o)();a=e["aria-label"]?void 0:a;var o=Object(k.k)().document;return Object(r.useEffect)((function(){if(t.current&&!t.current.contains(o.activeElement)){Object(L.c)(t.current);var e=setTimeout((function(){o.activeElement===t.current&&(t.current.blur(),Object(L.c)(t.current))}),500);return function(){clearTimeout(e)}}}),[t]),{dialogProps:Object(l.a)({},Object(k.c)(e,{labelable:!0}),{role:i,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||a}),titleProps:{id:a}}}({"aria-label":c,"aria-labelledby":s},t).dialogProps;return Object(i.d)(L.a,{contain:!0,autoFocus:!0,restoreFocus:!0},Object(i.d)("div",Object(l.a)({},Object(k.h)(d,b,m,p),{ref:t,css:Wt}),Object(i.d)(Kt,null,Object(i.d)(w.w,{css:Nt,onPress:a,"aria-label":"Close modal"},Object(i.d)(w.j,{"aria-hidden":!0}))),Object(i.d)(Yt,null,o)))})),Qt=function(e){var t=e.onClose,n=void 0===t?f.U:t,a=e.shown,o=e.children,c=Object(Oe.a)(e,["onClose","shown","children"]),s=r.useRef(null),u=Object(Be.b)(),d=Object(Vt.b)();return r.useEffect((function(){return d.setModalOpen(a)}),[a,d]),Object(i.d)(Te.a,null,Object(i.d)(Lt.a,{shown:a,onPress:n,exitDelay:25}),Object(i.d)(b.a,{component:null},a&&Object(i.d)(A.c,{nodeRef:s},Object(i.d)(Gt,Object(l.a)({onClose:n,ref:s,isPreview:u},c),o))))};var Jt="add_rate_comment_label",Xt={name:"1azakc",styles:"text-align:center"},Zt=Object(a.c)((function(e,t){var n=t.chatId,r=t.show,i=t.selectedRate,a=e.getApplicationState("isPreview"),o=a?function(){return Promise.resolve()}:function(t){var r=t.comment,i={};return void 0!==r&&(i.rateComment=r),e.requestUpdateChat(n,{properties:i})};return{selectedRate:i,show:r,mobile:e.getApplicationState("mobile"),rateChat:o,localize:e.localize,isPreview:a}}))((function(e){var t=e.rateChat,n=e.selectedRate,r=e.show,a=e.localize,o=e.isPreview,c=e.mobile,l=e.onClose,s=e.onSubmit;return Object(i.d)(Qt,{shown:r,onClose:l},Object(i.d)(Ht,null,"good"===n?Object(i.d)(w.V,{label:a("rate_me_confirmation_good")}):Object(i.d)(w.U,{label:a("rate_me_confirmation_bad")})),Object(i.d)("p",{id:Jt,css:Xt},a("rate_me_add_comment")),Object(i.d)(Pt.a,{id:"rate_comment",mobile:c,onSubmit:function(e){t({comment:e.comment}),s()},submitLabel:a("button_add_feedback"),validate:function(e){return e.comment?{}:{comment:a("survey_fill_in_required_fields")}},disabled:o},Object(i.d)(m.q,null,Object(i.d)(Dt.a,{label:"",serverName:"",type:"textarea",name:"comment",localize:function(){return a("rate_me_placeholder")},ariaLabelledBy:Jt,required:!0}))))}));var $t={name:"870gjp",styles:"font-size:inherit"},en={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},tn=Object(m.A)(w.w,{target:"e1mt5al70"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}",(function(e){var t=e.theme;return t.isRtl&&"smooth"===t.name&&en}),";"),nn=Object(a.c)((function(e,t){var n=t.chatId,r=t.variant,i=t.source,a=t.onRatingCommentModalStateChange,o=e.getApplicationState("isPreview"),c=o?function(){return Promise.resolve()}:function(t){var r=t.rate,a={};return void 0!==r&&(a.rate=r),e.requestUpdateChat(n,{properties:a},{source:i})};return function(e){var t=e.getChat(n),i=t.active,l=t.properties,s=l.ended;return{chatRate:l.rate,disabled:!o&&(!s&&!i),rateChat:c,localize:e.localize,variant:r,chatId:n,onRatingCommentModalStateChange:a}}}))((function(e){var t=e.chatId,n=e.chatRate,a=e.disabled,o=e.rateChat,c=e.localize,l=e.variant,s=void 0===l?"normal":l,u=e.onRatingCommentModalStateChange,d=r.useState(!1),b=d[0],f=d[1],m=r.useState(n),p=m[0],g=m[1],h=r.useCallback((function(e){return function(){var t=p===e,r=t?null:e;o({rate:r}).catch((function(){return g(n)})),g(r),f(!t)}}),[p,n,o]);r.useEffect((function(){g(n)}),[n]),r.useEffect((function(){u&&u(b)}),[b,u]);var v=function(){f(!1)},j=function(e){return{disabled:a,active:n===e,onPress:h(e),"aria-label":c(n===e?"cancel_"+e+"_rating":"rate_"+e+"_and_open_modal")}},O=c("good"===n?"rate_me_cancel_tooltip":"rate_me_good_tooltip"),x=c("bad"===n?"rate_me_cancel_tooltip":"rate_me_bad_tooltip");return Object(i.d)(r.Fragment,null,Object(i.d)(V.a,{isDisabled:a,description:O},Object(i.d)(tn,j("good"),"small"===s?Object(i.d)(w.Q,{css:$t,"aria-hidden":!0}):Object(i.d)(w.V,{css:$t,"aria-hidden":!0}))),Object(i.d)(V.a,{isDisabled:a,description:x},Object(i.d)(tn,j("bad"),"small"===s?Object(i.d)(w.P,{css:$t,"aria-hidden":!0}):Object(i.d)(w.U,{css:$t,"aria-hidden":!0}))),Object(i.d)(Zt,{show:b,onClose:v,onSubmit:v,selectedRate:p,chatId:t}))}));var rn=function(e){return{small:"24px",large:"56px"}[e]},an=Object(m.A)("div",{target:"ekqutxs1"})({name:"v2yezz",styles:"display:flex;flex-grow:0;align-items:center;position:relative"}),on=Object(m.A)("div",{target:"ekqutxs0"})("position:absolute;",(function(e){var t=e.availability,n=e.size,r=e.theme;return{width:"small"===n?r.spaces.space4:r.spaces.space5,height:"small"===n?r.spaces.space4:r.spaces.space5,background:"online"===t?r.colors.success:r.colors.grayscale[500],border:"2px solid "+r.colors.surface,borderRadius:r.borderRadius.round,top:"large"===n&&"modern"!==r.name?"0":"-2px",left:"large"===n&&"modern"!==r.name?"0":"-2px"}}),";"),cn=function(e){var t=e.avatarUrl,n=e.availability,r=e.size,a=void 0===r?"normal":r,o=Object(Oe.a)(e,["avatarUrl","availability","size"]);return Object(i.d)(an,o,Object(i.d)(m.b,{imgUrl:t,size:rn(a)}),n&&Object(i.d)(on,{availability:n,size:a}))};var ln=Object(m.A)("div",{target:"e9ks4qw3"})("display:flex;align-items:center;justify-content:center;padding-left:",(function(e){return e.logoWithoutShift?"0":"25px"}),";margin-bottom:",(function(e){return e.modernDowngrade?"0":"10px"}),";&>*{margin-left:",(function(e){return e.logoWithoutShift?"0":"-15px"}),";}"),sn=Object(m.A)("div",{target:"e9ks4qw2"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),un=Object(m.A)(Ht,{target:"e9ks4qw1"})("background-color:",(function(e){return e.theme.colors.surfaceDecorative}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";margin-top:-25px;margin-left:",(function(e){return e.withoutShift?"0":"-25px"}),";position:absolute;z-index:2000;"),dn=Object(m.A)("div",{target:"e9ks4qw0"})("width:56px;height:56px;border-radius:",(function(e){return e.theme.borderRadius.round}),";overflow:hidden;display:flex;align-items:center;position:relative;z-index:2;background-color:",(function(e){return e.theme.colors.surface}),";box-shadow:0 0 0 2px ",(function(e){return e.theme.colors.agentBarBackground}),";img{width:100%;height:100%;object-fit:contain;}&::after{top:0;left:0;right:0;bottom:0;content:'';position:absolute;width:100%;height:100%;border-radius:",(function(e){return e.theme.borderRadius.round}),";box-shadow:inset 0px 0px 0px 1px rgba(143, 143, 143, 0.15);}"),bn=function(e){var t=e.avatarUrl,n=e.icon,a=e.logoUrl,o=e.showAvatar,c=void 0===o||o,l="modern"===Object(s.g)().name,u=r.useState(!l&&Boolean(a)),d=u[0],b=u[1];return r.useEffect((function(){b(!l&&Boolean(a))}),[l,a]),Object(i.d)(ln,{modernDowngrade:l,logoWithoutShift:l||!a||!c},n&&Object(i.d)(sn,{"aria-hidden":!0},Object(i.d)(un,{size:"24px",isLight:!0,withoutShift:!a},n)),c&&Object(i.d)(cn,{size:"large",avatarUrl:t,availability:n?void 0:"online"}),d&&Object(i.d)(dn,null,Object(i.d)("img",{alt:"Company logo",src:a,onError:function(){return b(!1)}})))};var fn={name:"f7ay7b",styles:"justify-content:center"},mn=Object(m.A)("div",{target:"e10kp68a3"})({name:"zov8s0",styles:"width:100%;display:flex;justify-content:center"}),pn=Object(m.A)("div",{target:"e10kp68a2"})("display:flex;flex-direction:",(function(e){return e.verticalLayout?"row":"column"}),";justify-content:",(function(e){return e.verticalLayout?"flex-start":"center"}),";align-items:center;width:",(function(e){return e.verticalLayout?"100%":"auto"}),";max-width:100%;"),gn={name:"xyzkeb",styles:"align-self:flex-start"},hn=Object(m.A)(m.w,{target:"e10kp68a1"})({name:"172op4w",styles:"margin-top:0;margin-bottom:0"}),vn=Object(i.c)(fn," min-width:auto;"),jn=Object(m.A)("img",{target:"e10kp68a0"})({name:"1lnnphj",styles:"height:auto;max-height:50px"}),On=function(e){var t,n=e.agent,r=e.chatId,a=e.showAvatar,o=e.logoPath,c=e.isRatingEnabled,u="modern"===Object(s.g)().name;return Object(i.d)(mn,null,Object(i.d)(pn,{verticalLayout:u},Object(i.d)(bn,Object(l.a)({logoUrl:o,showAvatar:a},a&&n.avatar&&{avatarUrl:n.avatar})),Object(i.d)("div",{css:(t=u,Object(i.c)("margin-top:0;margin-bottom:",t?"0":"10px",";text-align:",t?"left":"center",";width:",t?"100%":"auto",";max-width:100%;min-width:0;",t&&gn,";"))},Object(i.d)(hn,{as:"h1",ellipsis:!0},Object(i.d)(Ft.a,null,n.name)),n.properties.jobTitle&&Object(i.d)(m.s,{ellipsis:!0},Object(i.d)(Ft.a,null,n.properties.jobTitle)),c&&u&&Object(i.d)(m.q,null,Object(i.d)(nn,{chatId:r,variant:"normal",source:"agent_bar"}))),c&&!u&&Object(i.d)(m.q,null,Object(i.d)(nn,{chatId:r,variant:"normal",source:"agent_bar"})),!!o&&u&&Object(i.d)(m.f,{css:vn},Object(i.d)(jn,{alt:"",src:o,draggable:!1}))))},xn=n(65),yn=n(93),wn="top-bar";var An={name:"l3iapi",styles:"margin-right:6px;margin-left:0"},kn=Object(m.A)(w.w,{target:"eyohww45"})("width:24px;height:24px;opacity:1;background-color:",(function(e){var t=e.theme;return"modern"===t.name?"transparent":t.colors.lighterOppositeAgentBarColor}),";",(function(e){return e.theme.isRtl&&An}),";"),Cn=Object(m.A)(w.h,{target:"eyohww44"})((function(e){return"up"===e.direction&&{transform:"rotate(180deg)"}})," transition:transform 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";"),Sn=Object(m.A)(Bt,{target:"eyohww43"})("display:flex;text-align:left;overflow:hidden;height:auto;width:100%;align-items:",(function(e){return e.veritcallyCenter?"center":"flex-start"}),";transition:height 0.3s ",(function(e){return e.theme.transitions.easings.swift}),";will-change:height;line-height:1.5;justify-content:center;"),En=Object(m.A)("div",{target:"eyohww42"})({name:"1kjhtaf",styles:"display:flex;align-items:flex-start;margin-top:10px"}),Tn=Object(m.A)("div",{target:"eyohww41"})({name:"zjik7",styles:"display:flex"}),_n=Object(m.A)("div",{target:"eyohww40"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),In=function(e){var t=e.text,n=e.icon,o=e.isLoadingHistory,c=e.forceExpanded,u=e.forceCollapsed,d=e.isUploadDrawerVisible,b=e.logoPath,f=r.useState(!0),m=f[0],p=f[1],g=r.useState(!1),h=g[0],v=g[1],j=r.useState(!1),O=j[0],x=j[1],y=r.useState(null),w=y[0],A=y[1],C=r.useState(!1),S=C[0],E=C[1],T=r.useRef(null),_=Object(k.l)(),I=Object(s.g)().name,R="modern"===I?45:108,B=r.useCallback((function(e){var t=(void 0===e?{}:e).shouldKeepPrevious,n=void 0!==t&&t;if(m){var r=T.current.clientHeight;r!==w&&A(r),T.current.style.height=r+"px",T.current.scrollTop}T.current.style.height=(m?R:Number(w))+"px",n&&v(m),p((function(e){return!e}))}),[m,w,R]),F=function(){m&&(T.current.style.height="auto")},P=o&&m,D=u&&m,M=h&&!u&&!m&&!d;r.useEffect((function(){if(T&&!c){var e=T.current.clientHeight>R;x(e)}T&&c&&(T.current.style.height="auto",x(!1))}),[T,c,R]),r.useEffect((function(){O&&(A(T.current.clientHeight),T.current.style.height=R+"px",E(!0),p(!1))}),[O,R]),r.useEffect((function(){(P||D)&&B({shouldKeepPrevious:D})}),[B,P,D]),r.useEffect((function(){M&&(v(!1),B())}),[B,M]);var U=m||!O;return Object(i.d)(a.a,null,(function(e){return Object(i.d)(Sn,{ref:T,row:!0,veritcallyCenter:!O,onTransitionEnd:F,textWrap:!0},Object(i.d)(_n,{css:U?"":Object(z.a)(2),id:_},"modern"!==I&&Object(i.d)(bn,{logoUrl:b,icon:n}),Object(i.d)(Tn,null,Object(i.d)("span",null,Object(i.d)(xn.a,Object(l.a)({template:t,root:{component:Ft.a},linkComponent:yn.a},!m&&{limit:120}))),O&&Object(i.d)(En,null,Object(i.d)(kn,{onPress:B,"aria-expanded":m,"aria-controls":_,"aria-label":e(m?"show_less":"show_more")},Object(i.d)(Cn,{size:24,direction:S&&m?"up":"down","aria-hidden":!0}))))))}))};function zn(){var e=Object(at.a)(["\n\t&-enter,\n\t&-appear {\n\t\ttransform: translateY(-100%);\n\t}\n\n\t&-enter-active,\n\t&-appear-active,\n\t&-enter-done,\n\t&-appear-done {\n\t\ttransform: translateY(0);\n\t\ttransition: transform ","ms ",";\n\t}\n\n\t&-exit {\n\t\ttransform: translateY(0);\n\t\tposition: absolute;\n\t\tright: 0;\n\t\tleft: 0;\n\t}\n\n\t&-exit-active {\n\t\ttransform: translateY(-100%);\n\t\ttransition: transform ","ms ",";\n\t}\n"]);return zn=function(){return e},e}var Rn=Object(m.A)(m.a,{target:"e10g0hdx4"})("position:relative;padding-top:",(function(e){return"modern"===e.theme.name?"0.6em":0}),";padding-bottom:",(function(e){var t=e.theme;return"modern"===t.name?"0.6em":t.spaces.space7}),";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";"),Bn=Object(m.A)("div",{displayName:"TopBar",target:"e10g0hdx3"})("position:relative;height:auto;bottom:0;z-index:",(function(e){return e.elevate?102:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";@media (max-height: 330px){display:none;}"),Fn=Object(m.A)("div",{target:"e10g0hdx2"})("min-height:",(function(e){return"calc("+("modern"===e.theme.name?45:108)+"px - 5px)"}),";"),Pn={name:"1pc9iid",styles:"position:relative;box-shadow:none;padding:0"},Dn=Object(m.A)(m.a,{target:"e10g0hdx1"})("position:absolute;top:0;left:0;width:100%;padding-top:",(function(e){return"modern"===e.theme.name?".6em":0}),";box-shadow:",(function(e){return e.theme.boxShadow.sm}),";",(function(e){return e.collapsed&&Pn}),";"),Mn=Object(m.A)("div",{target:"e10g0hdx0"})("position:relative;width:100%;z-index:",(function(e){var t=e.collapsed;return e.elevate?102:t?2:1}),";pointer-events:",(function(e){return e.elevate?"none":"all"}),";"),Un="cubic-bezier(0.14, 0, 0, 1)",Hn={enter:150,exit:150},qn=function(e){return e(zn(),150,Un,150,Un)},Ln={name:"kul0w8",styles:"transition:opacity 100ms ease-in-out;position:relative"},Vn=Object(a.c)((function(e,t){var n=t.chatId;return function(e){var t,r=Object(c.rb)(e),i=Object(c.ub)(e),a=Object(c.vb)(e),o=Object(c.j)("logo",e),l=o.enabled,s=n===h.d;return{agent:Object(c.e)(n,e),chatActive:e.getChat(n).active,showAvatar:Object(c.j)("agentAvatar",e).enabled,isRatingEnabled:Object(c.j)("rating",e).enabled,logoPath:l?(t=o.path,"https://"+Object(St.m)(t)):void 0,showAgentBar:r,showOfflineInformation:i,showQueueInformation:a,offlineInformation:s?Object(c.s)(e):"",queueText:s?Object(c.v)(e):"",showTopBar:Object(c.xb)(e),hasNoVisibleUserEvents:Object(c.K)(e),isDropAreaVisible:e.getApplicationState("dropAreaVisible"),isUploadingFiles:!!Object(c.t)(e).length}}}))((function(e){var t=e,n=t.agent,a=t.chatId,c=t.showAvatar,l=t.isRatingEnabled,s=t.chatActive,u=t.logoPath,d=t.showAgentBar,f=t.isAgentBarExpandedSource,p=t.showOfflineInformation,g=t.offlineInformation,h=t.showQueueInformation,v=t.queueText,j=t.isLoadingHistory,O=t.children,x=t.hasNoVisibleUserEvents,y=t.isDropAreaVisible,A=t.isUploadingFiles,k=t.wrapperRef,C=r.useRef(null),S=r.useRef(null),E=Object(o.v)(f);return Object(i.d)("div",{ref:k},Object(i.d)(Rt,{topBarHeight:k.current?k.current.clientHeight:0}),Object(i.d)(Bn,{id:wn,ref:C,elevate:y},Object(i.d)(i.a,null,(function(e){var t=e.css;return Object(i.d)(b.a,{appear:!0,component:null,exit:E},d&&E&&n&&Object(i.d)(ot.a,{timeout:Hn,classNames:qn(t)},Object(i.d)("div",null,Object(i.d)(Rn,{noShrink:!0},Object(i.d)(m.q,{flexFill:!0,ref:S,css:Ln},Object(i.d)(On,{agent:n,chatId:a,showAvatar:c,logoPath:u,isRatingEnabled:l&&s}))))))}))),Object(i.d)(Mn,{collapsed:!(h||p),elevate:y},(h||p)&&Object(i.d)(r.Fragment,null,Object(i.d)(Fn,null)),Object(i.d)(i.a,null,(function(e){var t=e.css;return Object(i.d)(b.a,{appear:h||p,component:null},Object(i.d)(ot.a,{timeout:Hn,classNames:qn(t)},Object(i.d)(Dn,{collapsed:!(h||p)},h&&Object(i.d)(In,{logoPath:u,text:v,icon:Object(i.d)(w.v,{size:24}),isLoadingHistory:j,forceExpanded:x,forceCollapsed:y,isUploadDrawerVisible:A}),p&&Object(i.d)(In,{logoPath:u,text:g,icon:Object(i.d)(w.i,{size:16}),isLoadingHistory:j,forceExpanded:x,forceCollapsed:y,isUploadDrawerVisible:A}),O)))}))))})),Nn=n(139);var Wn=Object(m.A)("div",{target:"e1fh44if0"})({name:"1f0bicm",styles:"padding:1em;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:0.9em"}),Kn=function(e){return r.createElement(Wn,null,r.createElement(_.a,e))},Yn=Object(a.c)((function(e){var t=function(){return p.O(e)},n=function(){return p.P(e,h.d)};return function(e){var r="startChatAgain"===c.k(e,h.d),i=e.getChat(h.d).properties,a=i.starting,o=i.startChatAgainPending,l=e.localize(r?"embedded_start_chat_again":"embedded_greeting_accept");return{startAction:r?n:t,buttonLabel:l,isPending:a||o}}}))((function(e){var t=e.isPending,n=e.buttonLabel,i=e.startAction,a=e.onClick,o=void 0===a?f.U:a;return r.createElement(Kn,{disabled:t,pending:t,onClick:function(e){i(),o(e)}},n)}));function Gn(){var e=Object(at.a)(["\n\t\t&-enter,\n\t\t&-appear {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t}\n\t\t&-enter-active,\n\t\t&-appear-active,\n\t\t&-enter-done,\n\t\t&-appear-done {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t\t&-exit {\n\t\t\tclip-path: circle(150% at 50% 50%);\n\t\t\topacity: 1;\n\t\t}\n\t\t&-exit-active {\n\t\t\tclip-path: circle(0% at 50% 50%);\n\t\t\topacity: 0;\n\t\t\ttransition-property: opacity, clip-path;\n\t\t\ttransition-duration: 600ms;\n\t\t\ttransition-timing-function: ease-out;\n\t\t\twill-change: opacity, clip-path;\n\t\t}\n\t"]);return Gn=function(){return e},e}var Qn=Object(m.A)("div",{target:"ekftid72"})((function(e){return e.theme.typography.caption}),";position:absolute;display:flex;flex-direction:row;height:40px;z-index:10;left:50%;top:14px;transform:translate(-50%, 0);max-width:100%;white-space:nowrap;background-color:",(function(e){return e.theme.colors.surface}),";color:",(function(e){return e.theme.colors.primaryTextColor}),";border-radius:20px;box-shadow:",(function(e){return e.theme.boxShadow.floating}),";"),Jn=Object(m.A)("div",{target:"ekftid71"})("flex-grow:1;flex-shrink:0;overflow:hidden;text-overflow:ellipsis;max-width:230px;padding:",(function(e){return e.theme.spaces.space5}),";"),Xn=Object(m.A)("div",{target:"ekftid70"})("display:flex;flex-direction:row;justify-content:center;align-items:center;padding-right:",(function(e){return e.theme.spaces.space2}),";button{font-size:2em;border-radius:50%;width:32px;height:32px;margin-left:4px;background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),Zn=function(e){return e(Gn())},$n=Object(a.c)((function(e,t){var n=t.chatId;return{shouldShow:Object(c.wb)(e),chatId:n}}))((function(e){var t=e.isAgentBarExpandedSource,n=e.chatId,c=e.shouldShow,l=Object(o.v)(t),s=Object(r.useState)(!1),u=s[0],d=s[1];return Object(i.d)(a.a,null,(function(e){return Object(i.d)(i.a,null,(function(t){var r=t.css;return Object(i.d)(ot.a,{in:!l&&c||u,classNames:Zn(r),timeout:100,unmountOnExit:!0,mountOnEnter:!0},Object(i.d)(Qn,null,Object(i.d)(Jn,null,e("rate_agent")),Object(i.d)(Xn,null,Object(i.d)(nn,{chatId:n,variant:"small",onRatingCommentModalStateChange:d,source:"prompt"}))))}))}))}));var er=Object(m.A)("div",{target:"ei7go8f1"})("position:absolute;bottom:0;left:0;right:0;background:",(function(e){return e.theme.colors.caution}),";z-index:2;color:",(function(e){return e.theme.colors.cautionContrast}),";text-align:center;font-size:0.9em;line-height:2.8em;transform:translateY(100%);"),tr=Object(m.A)("div",{target:"ei7go8f0"})({name:"obt24",styles:"flex-grow:1;height:100%;position:relative;min-height:0;-webkit-overflow-scrolling:touch"}),nr={name:"jddw9f",styles:"position:absolute;bottom:0;left:50%;z-index:3;transform:translate(-50%, 50%)"},rr=function(e){return e.events[0].id},ir=function(e){return 0!==e.length?rr(e[0]):void 0},ar=function(e){var t=Object(f.L)(e);if(t){var n=Object(f.L)(t.events);if(n)return n.id}};var or=Object(u.a)([function(e,t){return e.getTimeline(t)},f.C,function(e,t){return c.e(t,e)}],(function(e,t){var n=c.M(t);return e.map((function(e,r){var i=0===r,a=e.showDate&&!i&&n;return Object(l.a)({},e,{isThreadBoundary:a,authorData:c.b(t,e.author)})}))}))((function(e,t){return t})),cr=Object(a.c)((function(e,t){var n=t.id,r=e.getApplicationState("isPreview")?f.U:function(){p.M(e)},i=e.localize,a=function(){return e.updateChat(n,{properties:{loadingHistory:!0}})},o=function(t){return e.requestUpdateEvent(n,t,{seen:!0}).catch(f.U)},l=function(t,r){p.F(e,n,t,r)},s=function(t){var r=t.eventId,i=t.buttonId,a=c.c(e);e.sendEvent(n,{type:"rich_message_postback",thread:a,properties:{eventId:r,postback:{id:i,toggled:!0}}},void 0)},u=function(t){return c.X(e,t)},d=function(t){return p.K(e,t)},b=function(t){return p.U(e,{properties:t})},m=function(t){var n=t.event,r=t.button;return p.s(e,n,r)};return function(e){var t,f=e.getChat(n),p=f.active,g=f.properties,h=g.agentIsTyping,v=g.loadingHistory,j=g.queued,O=c.e(n,e),x=c.E(e,n),y=e.getUnseenCount(n),w=c.M(e)&&c.gb(e),A=c.j("rating",e).enabled,k=!0===(null==(t=e.getView("Moment"))?void 0:t.show);return{agent:O,active:p,loadHistory:a,isThreadStickerEnabled:w,hasMoreHistory:x,markAsSeen:o,sendMessage:l,queued:j,sendPostback:s,showPrechat:r,localize:i,updateSessionUser:b,showMoment:d,isMomentVisible:k,unseenCount:y,isRatingEnabled:A,timeline:or(e,n,e.getState()),activeQuickReply:c.w(n,e),agentIsTyping:h&&!!O,shouldLoadHistory:x&&!v,isLoadingHistory:v,showAvatar:c.j("agentAvatar",e).enabled,pageFocused:e.getApplicationState("pageFocused"),inputMode:c.k(e,n),reconnecting:c.yb(e),displayOfflineInformation:c.ub(e),lastSeenEvent:y>0&&e.getLastSeenAgentEvent(n),isGreeting:u,handleRichGreetingButtonClicked:m}}}))((function(e){var t=e,n=t.displayOfflineInformation,a=t.activeQuickReply,c=t.agent,u=t.isThreadStickerEnabled,p=t.hasMoreHistory,j=t.pageFocused,w=t.id,k=t.inputMode,C=t.loadHistory,S=t.localize,E=t.queued,T=t.reconnecting,_=t.shouldLoadHistory,I=t.showAvatar,z=t.showPrechat,R=t.timeline,B=t.agentIsTyping,F=t.mobile,P=t.unseenCount,D=t.isRatingEnabled,M=t.lastSeenEvent,U=t.sendMessage,H=t.isMomentVisible,q=t.handleRichGreetingButtonClicked,L=t.isOnBottomSource,V=t.isAgentBarExpandedSource,N=t.isLoadingHistory,W=r.useRef(null),K=r.useRef(null),Y=Object(o.w)(!1),G=r.useRef(!1),Q=r.useState(P),J=Q[0],X=Q[1],Z=r.useState("hidden"),$=Z[0],ee=Z[1],te=r.useState(j),ne=te[0],re=te[1],ie=r.useState(M)[0],ae=Object(o.c)((function(){return function(e,t){return e.some((function(e){return e.type===h.h}))?"draft":t?"newMessageDivider":"form"}(R,J)})),oe=Object(o.d)(T),ce="modern"!==Object(s.g)().name&&I,le="modern"===Object(s.g)().name;r.useEffect((function(){j&&!H||!ne?!j||H||ne||re(!0):re(!1)}),[j,ne,H]);var se=r.useCallback((function(e){e&&_&&C()}),[_,C]),ue=r.useCallback((function(e){L.next(e),re(!0)}),[L]),de=r.useCallback((function(e){e.deltaY>5&&V.next(!1)}),[V]),be=Object(o.t)(W,{firstItemKey:ir(R),lastItemKey:ar(R),onIsScrolledToTopChanged:se,onIsScrolledToBottomChanged:ue,onIsUserScrollingChanged:Y.next,onScrollDeltaChanged:de}),fe=be.scrollToTop,me=be.scrollToBottom,pe=be.getIsOnBottom,ge=be.onWheel,he=be.onTouchStart,Oe=be.getIsScrollable,xe=be.setScrollTargetNode,ye=r.useCallback((function(e){pe()&&me(e)}),[pe,me]),we=r.useCallback((function(){ye({duration:0})}),[ye]),Ae=function(e){return void 0===e&&(e=f.U),function(){me({duration:0}),e()}},ke=Object(o.q)((function(){pe()?me():me({duration:0}),V.next(!1),X(0)})),Ce=function(e){var t=r.useRef(e);return r.useEffect((function(){t.current=e})),r.useMemo((function(){return{handleActionButtonClick:function(e){var n=e.button,r=e.event,i=e.browserEvent,a=t.current,o=a.active,c=a.showMoment,l=a.sendPostback,s=a.sendMessage,u=a.handleSendMessage,d=a.isGreeting,b=a.handleRichGreetingButtonClicked;if(d(r))return b({event:r,button:n}),void("message"===n.type&&u());if(o)switch(n.type){case"webview":return l({eventId:r,buttonId:n.postbackId}),void c({url:n.value,source:"rich_message",triggeredTarget:Object(v.d)(i)});case"message":return s(n.text,{type:"action_button",event:r,button:n}),void u();case"copy":return void Object(g.a)(n.value);default:return void l({eventId:r,buttonId:n.postbackId})}},markAsSeen:function(e){return t.current.markAsSeen(e)}}}),[])}(Object(l.a)({},e,{handleSendMessage:ke})),Se=r.useCallback((function(e){G.current=e}),[]),Ee=!!(B||E||a||n),Te=r.useCallback((function(e){var t;V.get()&&K.current&&(K.current.contains(e.target)||e.target===window.document||(null==(t=e.target)?void 0:t.closest('button, label, input, [role="menuitem"], textarea'))||W.current&&W.current.contains(e.target)&&V.next(!1))}),[V]);return r.useEffect((function(){var e=V.subscribe((function(e){e&&requestAnimationFrame((function(){ye({duration:0})}))}));return function(){return e()}}),[V,ye]),r.useEffect((function(){Ee&&ye()}),[Ee,ye]),r.useEffect((function(){if(F){var e=function(){G.current&&me({duration:0})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}}),[F,me]),r.useEffect((function(){return ee("auto")}),[]),Object(o.s)({mainElementRef:W,itemsCount:R.reduce((function(e,t){return e+t.events.length}),0),tableEdgeReached:function(e){"previous"===e&&fe({duration:0})}}),Object(i.d)(mt,{isOnBottomSource:L,beginingOfTime:R.length>0?R[0].timestamp:null,rootRef:W},Object(i.d)(m.f,{noShrink:!0},Object(i.d)(Vn,{chatId:w,isAgentBarExpandedSource:V,isLoadingHistory:N,wrapperRef:K},u&&Object(i.d)(Ot,{css:nr,isUserScrollingSource:Y}),T&&!oe&&Object(i.d)(r.Fragment,null,Object(i.d)(d.b,{message:S("reconnecting"),clearOnUnmount:!0,"aria-live":"assertive"}),Object(i.d)(er,null,S("reconnecting")+"\u2026")))),Object(i.d)(b.a,{appear:!0,component:null},Object(i.d)(A.e,null,Object(i.d)(tr,{onClick:Te},Object(i.d)(ve,{chatId:w,isScrollable:Oe(),isOnBottomSource:L,scrollToBottom:me,markAsSeen:Ce.markAsSeen}),D&&Object(i.d)($n,{isAgentBarExpandedSource:V,chatId:w}),Object(i.d)(m.k,{active:ne,css:function(e){return function(e){var t=e.theme,n=e.overflow;return Object(i.c)("background:transparent;overscroll-behavior:contain;overflow-y:",t.isRtl?n:"auto",";position:absolute;top:0;bottom:0;left:0;right:0;")}({theme:e,overflow:$})},onWheel:ge,onTouchStart:he,ref:W},p&&Object(i.d)(m.q,null,Object(i.d)(O,{size:"medium",style:{margin:"auto"}})),R.map((function(e){return Object(i.d)(r.Fragment,{key:rr(e)},e.isThreadBoundary&&Object(i.d)(wt,{timestamp:e.timestamp}),ie&&J>0&&e.events.some((function(e){return e.id===ie.id}))&&Object(i.d)(Ct,{unseenCount:J,setScrollTargetNode:xe}),Object(i.d)(y.a,null,Object(i.d)(m.j,Object(l.a)({isOwn:e.own,isCarousel:"carousel"===e.type,onlyFirstWithMeta:!0},ce&&e.authorData.avatar&&{avatar:e.authorData.avatar}),e.events.map((function(t,n){return Object(i.d)(x.a,Object(l.a)({chatId:w,id:t.id,key:t.id,showMetaOnClick:!le||0!==n,radiusType:e.radiusType,listItemHandlers:Ce,scrollTarget:ae,scrollToBottom:me,increasedAvatarPadding:"carousel"===t.type&&ce},!J&&{setScrollTargetNode:xe}))})))))})),a&&Object(i.d)("div",{role:"row"},Object(i.d)("div",{role:"gridcell"},Object(i.d)(je.b,{"aria-labelledby":a.id,onSelect:function(e){var t=a.properties.quickReplies[e];a.properties.invitation?q({event:a.id,button:t}):U(t.text,{type:"quick_reply",event:a.id,button:t}),ke()},replies:a.properties.quickReplies}))),B&&Object(i.d)(r.Fragment,null,Object(i.d)(d.b,{clearOnUnmount:!0,"aria-live":"polite",message:S("operator_is_typing",{operator:c.name}).replace("...","")}),Object(i.d)(b.a,{appear:!0,component:null},Object(i.d)(A.b,{exit:!1},Object(i.d)(Nn.b,{avatar:ce?c.avatar:null})))))))),"requestPrechat"===k?Object(i.d)(Kn,{onClick:Ae(z)},S("embedded_greeting_accept")):"startChat"===k||"startChatAgain"===k?Object(i.d)(Yn,{onClick:Ae()}):"text"===k?Object(i.d)(it,{chatId:w,onSendMessage:ke,onHeightChange:we,onFocusChange:Se}):null)}));function lr(){var e=Object(at.a)(["\n\t&-enter,\n\t&-appear {\n\t\topacity: 0;\n\t}\n\n\t&-enter&-enter-active,\n\t&-appear&-appear-active {\n\t\topacity: 1;\n\t\ttransition: opacity ","ms ",";\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity ","ms ",";\n\t}\n"]);return lr=function(){return e},e}var sr=Object(m.A)("div",{displayName:"View",section:!0,target:"e1u2umur1"})({name:"73jfg1",styles:"flex-grow:1;display:flex;height:100%;min-height:0;padding-bottom:1em"}),ur=Object(m.A)("div",{displayType:"ViewContent",target:"e1u2umur0"})("overflow-y:auto;height:100%;flex-grow:1;padding:",(function(e){return e.full?"0 !important":"1em 1em 0 1em"}),";"),dr=function(e,t){return e(lr(),200,t.transitions.easings.sharp,200,t.transitions.easings.sharp)},br={name:"1d3w5wq",styles:"width:100%"},fr=function(e){var t=e.children,n=e.full,r=void 0!==n&&n;return Object(i.d)(sr,null,Object(i.d)(i.a,null,(function(e){var n=e.css,a=e.theme;return Object(i.d)(b.a,{css:br},Object(i.d)(ot.a,{appear:!0,classNames:dr(n,a),timeout:200},Object(i.d)(ur,{full:r},t)))})))},mr=Object(m.A)(m.c,{target:"ea4v29u0"})("background-color:",(function(e){return e.theme.colors.surface}),";"),pr=function(){return r.createElement(a.a,null,(function(e){return r.createElement(fr,null,r.createElement(mr,null,r.createElement(m.m,null,e("lost_connection"))))}))},gr=n(212);function hr(){var e=Object(at.a)(["\n\t50% {\n\t\topacity: 0.0;\n\t}\n"]);return hr=function(){return e},e}var vr=Object(i.e)(hr()),jr=Object(i.c)("background:currentColor;opacity:0.3;animation:",vr," 1.5s linear 0s infinite;"),Or=Object(i.c)(jr,";"),xr=Object(m.A)(m.a,{target:"e1uut4cd5"})({name:"2o6p8u",styles:"justify-content:space-between"}),yr=Object(m.A)("div",{target:"e1uut4cd4"})("width:",(function(e){return e.width||"10em"}),";height:1em;margin:0.3em;border-radius:",(function(e){return e.theme.borderRadius.sm}),";",jr,";"),wr=Object(m.A)("div",{target:"e1uut4cd3"})({name:"1d3w5wq",styles:"width:100%"}),Ar=Object(m.A)("div",{target:"e1uut4cd2"})({name:"66u5jz",styles:"padding:1em"}),kr=Object(m.A)("div",{target:"e1uut4cd1"})({name:"10qv9sv",styles:"width:100%;margin-top:0.5em"}),Cr=Object(m.A)("div",{displayName:"Message",section:!0,target:"e1uut4cd0"})(""),Sr=function(){var e=Object(a.g)((function(e){return Object(c.tb)(e)}));return Object(i.d)(fr,{full:!0},Object(i.d)(wr,null,Object(i.d)(xr,null,Object(i.d)(m.b,{css:Or,letter:" "}),e&&Object(i.d)(gr.a,null)),Object(i.d)(Ar,null,Object(i.d)(kr,null,Object(i.d)(m.q,null,Object(i.d)(Cr,null,Object(i.d)(m.c,null,Object(i.d)(m.m,null,Object(i.d)(yr,null),Object(i.d)(yr,{width:"7em"})))))),Object(i.d)(kr,null,Object(i.d)(m.q,{reverse:!0},Object(i.d)(Cr,null,Object(i.d)(m.c,null,Object(i.d)(m.m,null,Object(i.d)(yr,null)))))),Object(i.d)(kr,null,Object(i.d)(m.q,null,Object(i.d)(Cr,null,Object(i.d)(m.c,null,Object(i.d)(m.m,null,Object(i.d)(yr,null)))))))))},Er=n(189);var Tr=Object(m.A)("div",{target:"e5cxvfk0"})({name:"iwp08z",styles:"display:flex;justify-content:center;font-size:0.9em"}),_r=n(655);var Ir="close_chat_confirm_label",zr=Object(m.A)("p",{target:"ev8wfi81"})({name:"1azakc",styles:"text-align:center"}),Rr=Object(m.A)(w.w,{target:"ev8wfi80"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),Br=function(e){var t=e.localize,n=e.closeChat,i=e.onModalStateChange,a=r.useState(!1),o=a[0],c=a[1],l=r.useState(!1),s=l[0],u=l[1],d=Object(Be.b)(),b=function(){c(!1),i({isOpen:!1})};return r.createElement(r.Fragment,null,r.createElement(V.a,{description:t("close_chat")},r.createElement(Rr,{onPress:function(){c(!0),i({isOpen:!0})},"aria-label":t("close_chat")},r.createElement(w.j,{"aria-hidden":!0}))),r.createElement(Qt,{shown:o,onClose:b,"aria-labelledby":Ir},r.createElement(Ht,{"aria-hidden":!0},r.createElement(w.q,null)),r.createElement(zr,{id:Ir},t("leave_chat_confirm")),r.createElement(Tr,null,r.createElement(_r.i,{destructive:!0,label:t("close_chat"),submitting:s,onClick:function(){d?b():(u(!0),n().then((function(){u(!1),b()})).catch((function(){u(!1)})))}}))))},Fr=n(215),Pr=n(665),Dr=n(656),Mr=n(672);var Ur="email-transcript-sent-label",Hr="email-transcript-not-sent-label",qr=Object(m.A)("h2",{target:"emwx8nd0"})({name:"xvo3ou",styles:"text-align:center;font-size:16px;font-weight:normal"}),Lr=function(e){var t=e.email,n=e.localize,i=e.sent,a=e.open,c=e.onClose,l=e.onSubmit,s=e.mobile,u=Object(o.h)("email-transcript"),d=r.useState((function(){return{email:t}})),b=d[0],p=d[1];return r.useEffect((function(){if(a){var e=u.get();p(e||{email:t})}}),[u,t,a]),r.createElement(Qt,{shown:a,onClose:c,"aria-labelledby":i?Ur:Hr},a&&(i?r.createElement(r.Fragment,null,r.createElement(Ht,{"aria-hidden":!0},r.createElement(w.B,null)),r.createElement(qr,{id:Ur,textWrap:!0},n("chat_transcript_sent").replace(/%s/g,t||"")),r.createElement(Tr,null,r.createElement(_.a,{capitalize:!0,onClick:c},n("hide")))):r.createElement(r.Fragment,null,r.createElement(Ht,{"aria-hidden":!0},r.createElement(w.B,null)),r.createElement(qr,{id:Hr},n("send_transcript_to_email")),r.createElement(Pt.a,{id:"email_transcript",initialValues:b,mobile:s,onSubmit:function(e){return Math.random()<.01&&Object(Ce.d)("chat_transcript_ordered",{}),l(e.email).then((function(){return u.destroy()})).catch((function(){var e;return(e={})[Pr.a]=n("lost_connection"),e}))},submitLabel:n("send"),validate:function(e){return e.email?{}:{email:n("survey_fill_in_required_fields")}}},r.createElement(m.q,null,r.createElement(Dr.c,{onChange:function(e){var t=e.values;e.dirty&&u.set(t)}}),r.createElement(Mr.a,{ariaLabel:"Enter your email address",name:"email",required:!0,serverName:"",label:"",type:"email",localize:f.C}))))))},Vr=Object(m.A)("div",{target:"eleibs71"})("display:flex;position:relative;width:44px;height:24px;border-radius:24px;background-color:",(function(e){return e.theme.colors.inactiveElement}),";will-change:background-color;transition:background-color 0.2s linear;cursor:pointer;outline-offset:2px;&::after{content:'';position:absolute;height:16px;width:16px;border-radius:16px;top:4px;left:4px;background-color:",(function(e){return e.theme.colors.surface}),";will-change:left;transition:left 0.2s ease-in;}"),Nr=Object(m.A)("input",{target:"eleibs70"})("position:absolute;left:2137px;&:checked+div{background-color:",(function(e){return e.theme.colors.success}),";&::after{left:24px;}}"),Wr=function(e){var t=e.checked,n=Object(Oe.a)(e,["checked"]);return r.createElement(r.Fragment,null,r.createElement(Nr,Object(l.a)({type:"checkbox",checked:t},n)),r.createElement(Vr,null))};function Kr(){var e=Object(at.a)(["\n\t&-enter {\n\t\topacity: ",";\n\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 20%, 0);\n\t\t}\n\t}\n\n\t&-enter-active {\n\t\topacity: 1;\n\t\ttransition: opacity 100ms ease-in-out;\n\t\t[role='menuitem'],\n\t\t[role='switch'] {\n\t\t\ttransform: translate3d(0, 0%, 0);\n\t\t\ttransition: transform 200ms;\n\t\t}\n\t}\n\n\t&-exit {\n\t\topacity: 1;\n\t}\n\n\t&-exit-active {\n\t\topacity: 0;\n\t\ttransition: opacity 100ms ease-in-out;\n\t}\n"]);return Kr=function(){return e},e}var Yr=function(e){return Object(i.c)("margin-"+(e.isRtl?"left":"right")+": 8px;","")},Gr=Object(m.A)("div",{target:"e1s5h2c81"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Qr=Object(m.A)(Pe,{target:"e1s5h2c80"})({name:"2o6p8u",styles:"justify-content:space-between"}),Jr=function(e){return e(Kr(),"0.00001")},Xr=Object(a.c)((function(e){var t=h.d,n=function(n){return e.requestUpdateChat(t,{properties:{transcriptSentTo:n}})},r=function(){e.setApplicationState({muted:!e.getApplicationState("muted")})};return function(e){var i=e.getChat(t),a=i.active,o=i.properties,l=o.transcriptSentTo,s=Object(Fr.a)(e,"floating-menu");return{localize:e.localize,muted:e.getApplicationState("muted"),sendTranscript:n,transcriptSentTo:l,enableTranscript:!e.getApplicationState("isPreview")&&(a||o.ended),showTranscript:Object(c.j)("emailTranscript",e).enabled,toggleSounds:r,chatTransfer:s,customerEmail:e.getSessionUser().email,showVoiceAssistant:function(){return Object(p.K)(e,{url:h.o})}}}}))((function(e){var t=e.customerEmail,n=e.enableTranscript,a=e.localize,c=e.muted,l=e.sendTranscript,u=e.showTranscript,d=e.toggleSounds,f=e.chatTransfer,m=e.transcriptSentTo,p=e.showVoiceAssistant,g=r.useState(!1),v=g[0],j=g[1],O=r.useState(!1),x=O[0],y=O[1],A=Object(Ae.useFrame)(),k=Object(s.g)(),C=Object(Vt.b)();Object(o.g)(A);var S=r.useRef(null),E=!!m,T=r.useCallback((function(e){switch(e){case"sounds":return void d();case"transcript":return j(!1),void y(!0);case"identityTransfer":return Object(Ce.d)("chat_app_button_clicked",{ui_source:"menu"}),j(!1),void f.showMoment();case"voiceAssistant":j(!1),p()}}),[d,f,p]);return Object(o.p)((function(){v&&Math.random()<.01&&Object(Ce.d)("meatballs_menu_opened",{})}),[v]),r.useEffect((function(){return C.setMenuOpen(v)}),[v,C]),Object(i.d)(r.Fragment,null,Object(i.d)(V.a,{isDisabled:v,description:a("theme_options")},Object(i.d)(w.w,{css:Object(i.c)("padding:0;height:32px;background-color:",v?k.colors.lighterOppositeTitleBarColor:"transparent",";&:hover{background-color:",k.colors.lighterOppositeTitleBarColor,";}"),ref:S,onPress:function(){return j((function(e){return!e}))},active:v,"aria-label":v?"Close menu":"Open menu","aria-expanded":v,"aria-haspopup":!0},Object(i.d)(w.l,{"aria-hidden":!0,color:"modern"===k.name?k.colors.titleBarText:k.colors.agentBarText}))),Object(i.d)(i.a,null,(function(e){var t=e.css;return Object(i.d)(b.a,{component:null},v&&Object(i.d)(ot.a,{classNames:Jr(t),timeout:200},Object(i.d)(Re,{menuButtonRef:S,onClose:function(){return j(!1)},onSelect:T},u&&Object(i.d)(Pe,{disabled:!n,text:a("send_transcript"),value:"transcript"},Object(i.d)(w.B,{css:Yr(k),"aria-hidden":!0}),a("send_transcript")),f.available&&Object(i.d)(Pe,{text:h.j,value:"identityTransfer",disabled:f.disabled},Object(i.d)(w.D,{css:Yr(k),"aria-hidden":!0}),h.j),Object(i.d)(Qr,{text:a(c?"unmute":"mute"),"aria-label":c?a("sounds")+" "+a("unmute"):a("sounds")+" "+a("mute"),value:"sounds"},Object(i.d)(Gr,null,c?Object(i.d)(w.E,{css:Yr(k),"aria-hidden":!0}):Object(i.d)(w.Y,{css:Yr(k),"aria-hidden":!0}),Object(i.d)("span",{"aria-hidden":!0},a("sounds"))),Object(i.d)(Wr,{checked:!c,onChange:function(){return!c},"aria-hidden":!0})),!1)))})),Object(i.d)(Lr,{email:E?m:t,localize:a,onClose:function(){return y(!1)},onSubmit:l,sent:E,open:x}))}));var Zr=window.matchMedia("(max-height: 330px)"),$r=function(e,t,n){return function(r){return Object(i.c)("overflow:hidden;flex-grow:0;text-align:left;padding:0 0.8em;font-weight:700;display:flex;align-items:center;transition:0.3s background-color;z-index:",e?103:2,";pointer-events:",e?"none":"all",";box-shadow:",t?r.boxShadow.md:"none",";",n&&Object(i.c)("box-shadow:",r.boxShadow.enormous,";"),";transition:box-shadow 200ms ",r.transitions.easings.smooth,";")}},ei=Object(m.A)("div",{displayName:"IconPlaceholder",target:"e7bf83j5"})({name:"febvbf",styles:"width:25px;flex-shrink:0"}),ti=function(e){return Object(i.c)("font-size:inherit;font-weight:700;margin-top:0;margin-bottom:0;transition:opacity 100ms ",e.transitions.easings.smooth,";")},ni=Object(m.A)(cn,{target:"e7bf83j4"})({name:"1693thf",styles:"margin-right:5px"}),ri=Object(m.A)("h1",{target:"e7bf83j3"})((function(e){var t=e.theme;return ti(t)}),";"),ii={name:"1l53zi",styles:"pointer-events:none;opacity:0;cursor:auto"},ai={name:"4uq5vb",styles:"pointer-events:all;opacity:1;cursor:pointer"},oi=Object(m.A)("button",{target:"e7bf83j2"})((function(e){var t=e.theme;return ti(t)})," margin:0 auto;padding:6px;border-radius:",(function(e){return e.theme.borderRadius.def}),";display:flex;flex-direction:row;justify-content:center;align-items:center;position:relative;color:inherit;background:none;border:none;appearance:none;max-width:100%;transition:none;",(function(e){var t=e.show,n=e.focused;return t||n?ai:ii}),";&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),ci=Object(m.A)(w.w,{target:"e7bf83j1"})("&:hover{background-color:",(function(e){return e.theme.colors.lighterOppositeTitleBarColor}),";}"),li=Object(m.A)("div",{target:"e7bf83j0"})(""),si=function(e){return Object(f.fb)(e-1).map((function(e){return Object(i.d)(ei,{key:"placeholder_"+e})}))},ui={name:"21xn5r",styles:"transform:rotate(180deg)"},di=Object(a.c)((function(e,t){var n=t.chatId,r=function(){return e.requestUpdateChat(n,{active:!1})},i=function(){e.setCurrentView("Homescreen")},a=e.getApplicationState("embedded");return function(e){var t,o=Object(c.e)(n,e),l=Object(c.rb)(e),s=function(e,t){if(e&&e.name&&t)return e.name}(o,l),u=!(Object(c.vb)(e)||Object(c.ub)(e))&&s,d=n===h.k,b=e.getApplicationState("defaultWidget"),f=(null==(t=Object(c.j)("homeScreen",e))?void 0:t.enabled)||"openwidget"===b;return{embedded:a,closeChat:r,title:d?"Welcome to OpenAI Chat":e.localize("welcome_title"),titleWithAgentData:s,agent:o,shouldShowTitleWithAgentData:u,showCloseButton:!d&&e.getChat(n).active,localize:e.localize,showAgentBar:l,showAvatar:Object(c.j)("agentAvatar",e).enabled,isDropAreaVisible:e.getApplicationState("dropAreaVisible"),showBackButton:f&&!!e.getView("Homescreen"),goToHomescreen:i,showRatingPrompt:Object(c.wb)(e)}}}))((function(e){var t=e.showCloseButton,n=e.closeChat,a=e.localize,c=e.showMinimizedButton,u=e.title,d=e.titleWithAgentData,b=e.onMinimize,f=e.showAgentBar,p=e.shouldShowTitleWithAgentData,g=e.agent,h=e.showAvatar,v=e.isDropAreaVisible,j=e.showBackButton,O=e.goToHomescreen,x=e.isAgentBarExpandedSource,y=e.showRatingPrompt,w=Object(s.g)(),A=r.useRef(),k=r.useRef(),C=r.useRef(),S=r.useRef(Zr.matches),E=r.useState(!1),T=E[0],_=E[1],I=Object(L.e)(),z=I.isFocusVisible,R=I.focusProps,B=w.name,F=Object(o.v)(x),P=y&&!F,D=r.useCallback((function(){x.next(!F)}),[p,x,F]);r.useEffect((function(){var e=function(e){var t=e.matches;return S.current=t};return Zr.addListener(e),function(){return Zr.removeListener(e)}}),[]);var M=function(e,t){var n=e.filter(Boolean),r=t.filter(Boolean);return n.length===r.length?{leftIcons:n,rightIcons:r}:n.length>r.length?{leftIcons:n,rightIcons:si(n.length-r.length).concat(r)}:{leftIcons:n.concat(si(r.length-n.length)),rightIcons:r}}([j&&Object(i.d)(ci,{"aria-label":a("go_back_to_homescreen")||a("back"),key:"back",onPress:O},Object(i.d)(Er.a,{"aria-hidden":!0,css:ui})),Object(i.d)(Xr,{key:"menu"})],[c&&Object(i.d)(gr.a,{key:"minimize",onPress:b}),(t||T)&&Object(i.d)(Br,{key:"close",closeChat:n,localize:a,onModalStateChange:function(e){var t=e.isOpen;return _(t)}})]),U=M.leftIcons,H=M.rightIcons,q="modern"===B?"small":"normal",V=p&&!F;return Object(i.d)(m.x,{css:$r(v,V,P),leftIcons:U,noShrink:!0,rightIcons:H,title:Object(i.d)(li,{ref:C},!p&&!f&&u&&Object(i.d)(ri,null,u),p&&Object(i.d)(oi,Object(l.a)({show:!F},R,{focused:z,ref:k,onClick:D,"aria-expanded":F,"aria-controls":wn}),!(F&&f)&&Object(i.d)(r.Fragment,null,!F&&g&&f&&h&&Object(i.d)(ni,{avatarUrl:g.avatar,size:q,availability:"online"}),!F&&g&&!h&&Object(i.d)(ni,{size:q,availability:"online"}),Object(i.d)(ri,{ref:A,ellipsis:!0},Object(i.d)(Ft.a,null,d))),F&&Object(i.d)("span",null,"Collapse")))})})),bi=n(681),fi=n(678),mi=r.lazy((function(){return n.e(5).then(n.bind(null,686))}));t.default=Object(a.c)((function(e){var t;return{destroyed:e.getApplicationState().destroyed,showLoader:Object(c.sb)(e),defaultWidget:e.getApplicationState().defaultWidget,currentView:e.getCurrentView(),chatId:Object(c.f)(e),homeScreenEnabled:null==(t=Object(c.j)("homeScreen",e))?void 0:t.enabled}}))((function(e){var t=e.destroyed,n=e.showLoader,r=e.currentView,a=e.defaultWidget,c=e.onMinimizeButtonPress,l=e.showMinimizedButton,s=e.homeScreenEnabled,u=e.chatId,d=Object(o.w)(!0),b=Object(o.w)(!0),f="openwidget"===a;return t?Object(i.d)(pr,null):n?Object(i.d)(Sr,null):(f||s)&&r&&"Chat"!==r?Object(i.d)(mi,{currentView:r,defaultWidget:a}):Object(i.d)(fi.a,null,Object(i.d)(di,{isOnBottomSource:d,onMinimize:c,showMinimizedButton:l,isAgentBarExpandedSource:b,chatId:u}),Object(i.d)(cr,{id:u,isOnBottomSource:d,isAgentBarExpandedSource:b}),Object(i.d)(bi.a,null))}))}}]);